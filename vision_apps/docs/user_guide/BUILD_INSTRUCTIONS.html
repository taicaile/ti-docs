<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>Vision Apps User Guide: Build Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vision Apps User Guide
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('BUILD_INSTRUCTIONS.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Build Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md10">IMPORTANT NOTES</a></li>
<li class="level1"><a href="#QUICK_SETUP_STEPS">Quick Steps to build vision apps for selected configuration</a><ul><li class="level2"><a href="#QUICK_SETUP_STEPS_LINUX_TI_RTOS">Linux+RTOS mode</a></li>
<li class="level2"><a href="#QUICK_SETUP_STEPS_QNX_TI_RTOS">QNX+RTOS mode</a></li>
<li class="level2"><a href="#QUICK_SETUP_STEPS_PC_EMULATION">PC emulation mode</a></li>
</ul>
</li>
<li class="level1"><a href="#BUILD_CLEAN">Quick steps to clean vision apps generated files</a><ul><li class="level2"><a href="#QUICK_SETUP_STEPS_SAFERTOS">SafeRTOS Support</a></li>
</ul>
</li>
<li class="level1"><a href="#BUILD_DETAILED">Detailed steps to configure and build vision apps</a><ul><li class="level2"><a href="#MAKEFILE_OPTIONS">Makefile and configuration options</a></li>
<li class="level2"><a href="#BUILD_SOURCE">Build vision apps without prebuilt libraries</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md10"></a>
IMPORTANT NOTES</h1>
<ul>
<li><b> Make sure additional components and network proxies are setup as mentioned in <a class="el" href="ENVIRONMENT_SETUP.html">Build Environment Setup</a> before proceeding to building PSDK RTOS </b></li>
<li><b> Make sure you dont skip any of the steps mentioned below (for the selected configuration )</b></li>
<li>${PSDKR_PATH} refers to the path where Processor SDK RTOS (PSDK RTOS) is installed</li>
<li>${PSDKL_PATH} refers to the path where Processor SDK Linux (PSDK Linux) is installed</li>
<li>All folders like, pdk_j721s2_09_00_01_04, tiovx, vision_apps mentioned in the user guide are relative to ${PSDKR_PATH} unless explicitly stated otherwise.</li>
<li>The build is tested on Ubuntu (x86_64) 22.04 system and may not work on earlier or later Ubuntu systems.</li>
<li>20GB of free space is required to install and build PSDK RTOS</li>
<li>Make sure you have sudo access</li>
</ul>
<h1><a class="anchor" id="QUICK_SETUP_STEPS"></a>
Quick Steps to build vision apps for selected configuration</h1>
<p>This section details the build steps for each of the following HLOS setup configurations. Follow the steps in the appropriate section.</p>
<ul>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#QUICK_SETUP_STEPS_LINUX_TI_RTOS">Linux+RTOS mode</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#QUICK_SETUP_STEPS_QNX_TI_RTOS">QNX+RTOS mode</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#QUICK_SETUP_STEPS_PC_EMULATION">PC emulation mode</a></li>
<li><a class="el" href="BUILD_INSTRUCTIONS.html#QUICK_SETUP_STEPS_SAFERTOS">SafeRTOS Support</a></li>
</ul>
<h2><a class="anchor" id="QUICK_SETUP_STEPS_LINUX_TI_RTOS"></a>
Linux+RTOS mode</h2>
<ul>
<li>Edit file sdk_builder/build_flags.mak and modify below variables <div class="fragment"><div class="line">BUILD_EMULATION_MODE=no</div><div class="line">BUILD_TARGET_MODE=yes</div><div class="line">BUILD_LINUX_MPU=yes</div><div class="line">PROFILE=release</div></div><!-- fragment --></li>
<li>Do below to build the source code using pre-built libraries provided in the SDK installer, with "N" being the number of parallel threads <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make vision_apps -jN</div></div><!-- fragment --></li>
<li>The RTOS, Linux executable are stored below <div class="fragment"><div class="line">vision_apps/out/$(TARGET_SOC)/$(MPU_CPU)/LINUX/$PROFILE</div><div class="line">vision_apps/out/$(TARGET_SOC)/R5F/$(RTOS)/$PROFILE</div><div class="line">vision_apps/out/$(TARGET_SOC)/$(TARGET_C7X)/$(RTOS)/$PROFILE</div></div><!-- fragment --></li>
</ul>
<p><br />
</p>
<h2><a class="anchor" id="QUICK_SETUP_STEPS_QNX_TI_RTOS"></a>
QNX+RTOS mode</h2>
<ul>
<li>Make sure that you have the QNX SDP 7.1 installed in your PC as mentioned in <a class="el" href="ENVIRONMENT_SETUP.html#ENVIRONMENT_SETUP_QNX">Step 2b: Download and Install PSDK QNX addon to run in QNX+RTOS mode (Optional, only needed for QNX+RTOS mode)</a></li>
<li>Edit file sdk_builder/build_flags.mak and modify below variables <div class="fragment"><div class="line">BUILD_EMULATION_MODE=no</div><div class="line">BUILD_TARGET_MODE=yes</div><div class="line">BUILD_LINUX_MPU=no</div><div class="line">BUILD_QNX_MPU=yes</div><div class="line">PROFILE=release</div></div><!-- fragment --></li>
<li>Edit the file sdk_builder/tools_path.mak and modify below variables <div class="fragment"><div class="line">QNX_BASE=&lt;QNX SDP installation path&gt;</div></div><!-- fragment --></li>
<li>Do below to build the source code using pre-built libraries provided in the SDK installer, with "N" being the number of parallel threads<ul>
<li>Note: If using SBL as the bootloader, the BUILD_CPU_MCU1_0 should be set to "no" in sdk_builder/vision_apps_build_flags.mak. The boot app will be used as the MCU1-0 image in this case. For more information, please refer to the app note <a href="../../../psdk_rtos/docs/user_guide/developer_notes_mcu1_0_sysfw.html">here</a>. <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">./make_sdk.sh</div></div><!-- fragment --></li>
</ul>
</li>
<li>The RTOS, QNX executables are stored below <div class="fragment"><div class="line">vision_apps/out/$(TARGET_SOC)/$(MPU_CPU)/QNX/$PROFILE</div><div class="line">vision_apps/out/$(TARGET_SOC)/R5F/$(RTOS)/$PROFILE</div><div class="line">vision_apps/out/$(TARGET_SOC)/C66/$(RTOS)/$PROFILE</div><div class="line">vision_apps/out/$(TARGET_SOC)/$(TARGET_C7X)/$(RTOS)/$PROFILE</div></div><!-- fragment --></li>
<li>Depending on whether you have a GP or HS device and are using SBL build, you will need to build using one of the following commands. Note: for J721E, by default, these files are built for J721E SR 1.1, but can be configured for J721E SR 1.0 by referencing <a class="el" href="BUILD_INSTRUCTIONS.html#MAKEFILE_OPTIONS">Makefile and configuration options</a> :<ul>
<li><b>Option 1:</b> If building for SBL boot mode for GP devices, do below to build the required boot images <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make qnx_fs_create</div><div class="line">make sbl_bootimage</div></div><!-- fragment --></li>
<li><b>Option 2:</b> If building for SBL boot mode for HS devices, do below to build the required boot images <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make qnx_fs_create</div><div class="line">make sbl_bootimage_hs</div></div><!-- fragment --></li>
</ul>
</li>
<li>If building for SBL boot mode, do below to build the required boot images <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make qnx_fs_create</div><div class="line">make sbl_bootimage</div></div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="QUICK_SETUP_STEPS_PC_EMULATION"></a>
PC emulation mode</h2>
<ul>
<li>Edit file sdk_builder/build_flags.mak and modify below variables <div class="fragment"><div class="line">BUILD_EMULATION_MODE=yes</div><div class="line">BUILD_TARGET_MODE=no</div></div><!-- fragment --></li>
<li>Do below to build the source code, <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">./make_sdk.sh</div></div><!-- fragment --></li>
<li>The PC executables are stored below <div class="fragment"><div class="line">vision_apps/out/PC/x86_64/LINUX/$PROFILE</div></div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="BUILD_CLEAN"></a>
Quick steps to clean vision apps generated files</h1>
<ul>
<li>To do a clean build of vision_apps do below, <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make vision_apps_scrub</div></div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="QUICK_SETUP_STEPS_SAFERTOS"></a>
SafeRTOS Support</h2>
<ul>
<li>By default, the SDK builds the remote core images using FreeRTOS as the OS.</li>
<li>For J721E and J721S2, SafeRTOS is also supported as an OS within the SDK. An add-on package is required from WHIS in order to support this. For more information on how to obtain the SafeRTOS package from WHIS as well as for more information on SafeRTOS, please see the PDK SafeRTOS documentation <a href="../../../pdk_j721s2_09_00_01_04/docs/userguide/j721s2/family_cfg/jacinto/index_modules_safertos_jacinto.html#safertos">here</a>.</li>
<li>Once the SafeRTOS package has been downloaded and installed, the SDK can be built for SafeRTOS. In order to do so, edit the file sdk_builder/build_flags.mak and modify below variables <div class="fragment"><div class="line">RTOS=SAFERTOS</div></div><!-- fragment --></li>
<li>A limitation with SafeRTOS vs FreeRTOS is that the API for obtaining the core loading is not enabled. Therefore, the performance statistics feature within the SDK is not supported with SafeRTOS.</li>
<li>A limitation with SafeRTOS vs FreeRTOS is that when QNX is used as the HLOS for the MPU, SPL+uboot must be used as the bootloader rather than SBL + the boot app. The boot app does not currently support SafeRTOS.</li>
<li>All other known issues with SafeRTOS + Vision Apps integration can be found in the vision apps release notes.</li>
</ul>
<h1><a class="anchor" id="BUILD_DETAILED"></a>
Detailed steps to configure and build vision apps</h1>
<h2><a class="anchor" id="MAKEFILE_OPTIONS"></a>
Makefile and configuration options</h2>
<ul>
<li>Default makefile flag values are set to build the SDK properly. However below flags are recommended to be changed by users to speed up their build time, execution speed and/or configure what to build depending on their specific requirements.</li>
<li>Edit below variables in <b>sdk_builder/build_flags.mak</b>. These flags will affect app_utils, tiovx, imaging, video_io, as well as vision_apps builds.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Makefile flag  </th><th class="markdownTableHeadNone">Valid values (default value in bold)  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PROFILE  </td><td class="markdownTableBodyNone">debug or release or <b>all</b>  </td><td class="markdownTableBodyNone">"debug" for debug only build, <br />
 "release" for release only build, <br />
 "all" for both debug and release builds   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">BUILD_TARGET_MODE  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" to build for SoC platform. In case you are building only for PC keep this to "no"   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BUILD_QNX_MPU  </td><td class="markdownTableBodyNone">yes or <b>no</b>  </td><td class="markdownTableBodyNone">"yes" if you want to build for QNX on the MPU. In case you are building for RTOS only mode or Linux + RTOS mode, keep this to "no"   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">BUILD_LINUX_MPU  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" if you want to build for ARM Linux on the MPU. In case you are building for RTOS only mode or QNX + RTOS mode, keep this to "no"   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BUILD_EMULATION_MODE  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" to build for PC emulation mode. In case you are building only for SoC keep this to "no"   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">BUILD_CT_*  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" to enable OpenVX conformance tests for specific group of tests (CT). Typically during development one would keep all to "no" and only enable the required tests in respective CT "test_main.h"   </td></tr>
</table>
<ul>
<li>Edit below variables in <b>sdk_builder/vision_apps_build_flags.mak</b>,</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Makefile flag  </th><th class="markdownTableHeadNone">Valid values (default value in bold)  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BUILD_CPU_&lt;cpu name&gt;  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" if you want that CPU in your build, else keep it to "no". <br />
 <b>Note</b>, BUILD_CPU_MPU1, BUILD_CPU_MCU2_0 MUST be kept as "yes"<br />
 <b>Note</b>, If building for MCU1_0, please refer to the developer note <a href="../../../psdk_rtos/docs/user_guide/developer_notes_mcu1_0_sysfw.html">here</a>. <br />
 <b>Note</b>, if switching between building with BUILD_CPU_MCU1_0 turned on and off, you will need to re-install the bootfs and targetfs to the SD card as described here <a class="el" href="RUN_INSTRUCTIONS.html#run_step1_linux">Step 1: Prepare SD card for boot (one time only)</a>.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">BUILD_APP_RTOS_LINUX  </td><td class="markdownTableBodyNone"><b>yes</b> or no  </td><td class="markdownTableBodyNone">"yes" to build Linux+RTOS mode binaries for selected CPUs. Keep to "no" if you are not interested in Linux+RTOS binaries. <br />
 By default this is set to BUILD_LINUX_MPU   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BUILD_APP_RTOS_QNX  </td><td class="markdownTableBodyNone">yes or <b>no</b>  </td><td class="markdownTableBodyNone">"yes" to build QNX+RTOS mode binaries for selected CPUs. Keep to "no" if you are not interested in QNX+RTOS binaries. <br />
 By default this is set to BUILD_QNX_MPU   </td></tr>
</table>
<ul>
<li>Edit <b>vision_apps/platform/${SOC}/rtos/common/app_cfg*.h</b> for additional build time configuration, <br />
 <b>Note</b>, additional #define's are defined in these files, but only ones which typical users need to customize are listed below.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File  </th><th class="markdownTableHeadNone">#define  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">app_cfg.h  </td><td class="markdownTableBodyNone">ENABLE_IPC_&lt;cpu name&gt;  </td><td class="markdownTableBodyNone">#undef these to disable a CPU from the system, #define to enable in the system <br />
 <b>Note</b>, this must match the BUILD_CPU_&lt;cpu name&gt; sdk_builder/vision_apps_build_flags.mak   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">app_cfg_mcu2_0.h  </td><td class="markdownTableBodyNone">ENABLE_DSS_EDP  </td><td class="markdownTableBodyNone">#define this to enable eDP display via base EVM, make sure to #undef ENABLE_DSS_DSI as well.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">app_cfg_mcu2_0.h  </td><td class="markdownTableBodyNone">ENABLE_DSS_DSI  </td><td class="markdownTableBodyNone">#define this to enable DSI display, make sure to #undef ENABLE_DSS_EDP and ENABLE_DSS_HDMI as well   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">app_cfg_mcu2_0.h  </td><td class="markdownTableBodyNone">ENABLE_DSS  </td><td class="markdownTableBodyNone">#undef this to disable display, if you don't have display panel   </td></tr>
</table>
<h2><a class="anchor" id="BUILD_SOURCE"></a>
Build vision apps without prebuilt libraries</h2>
<ul>
<li>Do below to see values of make configuration variables <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make sdk_show_config</div></div><!-- fragment --></li>
<li>Do below to see additional make targets to do a granular SDK build <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make sdk_help</div></div><!-- fragment --></li>
<li>Do below to build the full PSDK RTOS, with "N" being the number of parallel threads <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make sdk -jN</div></div><!-- fragment --></li>
<li>This command does same as above, except it also traps all build errors and displays them at end of log (since parallel build otherwise may not display all errors at the end). <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">./make_sdk.sh</div></div><!-- fragment --></li>
<li>Do below to clean the full PSDK RTOS <div class="fragment"><div class="line">cd sdk_builder</div><div class="line">make sdk_scrub</div></div><!-- fragment --> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
