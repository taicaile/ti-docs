<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>Vision Apps User Guide: Auto Valet Parking Application 3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vision Apps User Guide
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group_apps_dl_demos_app_tidl_avp3.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Auto Valet Parking Application 3 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md123"></a>
Introduction</h1>
<p>This application shows a demo of auto valet parking application which runs 5 deep learning algorithms such as parking spot detection, vehicle detection, semantic segmentation, motion segmentation and depth estimation on multiple input channels such as front, right and left cameras. The demo takes as input a sequence of nv12 images of resolution 1280x720 pixels coming from different input channels. The input is resized using a multi-scalar hardware (MSC) to 768x384 resolution which is provided to a multi-category object-detection network for doing parking spot detection and vehicle detection. The same resized input is provided provided to a multi-task network which does semantic segmentation, motion segmentation and depth estimation. The multi-task network also takes in Dense Optical Flow (DOF) output to help in motion segmentation task. The inputs are pre-processed on C66 DSP before providing to TIDL running on C7x DSP. The output of TIDL is then post-processed on another C66 DSP which draws rectangles around objects and blends semantic segmentation output. User can select a sub-set of outputs for display which is rendered using DSS driver.</p>
<h1><a class="anchor" id="autotoc_md124"></a>
Supported plaforms</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform  </th><th class="markdownTableHeadNone">Linux x86_64  </th><th class="markdownTableHeadNone">Linux+RTOS mode  </th><th class="markdownTableHeadNone">QNX+RTOS mode  </th><th class="markdownTableHeadNone">SoC   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Support  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">J721e / J721S2 / J784S4   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md125"></a>
Data flow</h1>
<p>Note: On J721S2, the algorithms running on C66_1 and C66_2 have been recompiled and are running on the standalone C7X.</p>
<div class="image">
<img src="app_tidl_avp3_dataflow.jpg" alt="app_tidl_avp3_dataflow.jpg"/>
</div>
<h1><a class="anchor" id="autotoc_md126"></a>
Steps to run the application on J7 EVM (Linux + RTOS mode)</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for Linux+RTOS mode</li>
<li>A sample config file "app_avp3.cfg" is provided under "/opt/vision_apps/" folder on the rootfs partition.</li>
<li>Edit config file to modify the fields as required</li>
<li>Run the app as shown below <div class="fragment"><div class="line">cd /opt/vision_apps</div><div class="line">source ./vision_apps_init.sh</div><div class="line">./run_app_tidl_avp3.sh</div></div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md127"></a>
Steps to run the application on J7 EVM (QNX + RTOS mode)</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for QNX+RTOS mode</li>
<li>A sample config file "app_avp3.cfg" is provided under "/ti_fs/vision_apps/" folder on the boot partition.</li>
<li>Edit config file to modify the fields as required</li>
<li>Run the app as shown below <div class="fragment"><div class="line">cd /ti_fs/vision_apps</div><div class="line">. ./vision_apps_init.sh</div><div class="line">./run_app_tidl_avp3.sh</div></div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md128"></a>
Steps to run the application on Linux x86_64</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for PC emulation mode</li>
<li>A sample config file "app_avp3.cfg" is provided under "${PSDKR_PATH}/vision_apps/apps/dl_demos/app_tidl_avp3/config" folder</li>
<li>Edit config file to modify the fields as required</li>
<li>Create an output directory <div class="fragment"><div class="line">mkdir app_tidl_avp3_out</div></div><!-- fragment --></li>
<li>Run the app as shown below <div class="fragment"><div class="line">./vx_app_tidl_avp3 --cfg ${PSDKR_PATH}/vision_apps/apps/dl_demos/app_tidl_avp3/config/app_avp3.cfg</div></div><!-- fragment --></li>
<li>The output will be written in "app_tidl_avp3_out" folder in nv12 format.</li>
<li>Use open source tools like YUView to see the output.</li>
</ol>
<h1><a class="anchor" id="autotoc_md129"></a>
Sample Output</h1>
<p>Shown below is a example input and its corresponding output</p>
<h2><a class="anchor" id="autotoc_md130"></a>
Semantic Segmentation - Parking Spot Detection - Vehicle Detection</h2>
<div class="image">
<img src="app_tidl_avp3_output1.jpg" alt="app_tidl_avp3_output1.jpg"/>
</div>
<h2><a class="anchor" id="autotoc_md131"></a>
Dense Optical Flow - Motion Segmentation - Depth Estimation</h2>
<div class="image">
<img src="app_tidl_avp3_output2.jpg" alt="app_tidl_avp3_output2.jpg"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
