<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>Vision Apps User Guide: Dense Optical Flow Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vision Apps User Guide
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group_apps_basic_demos_app_dof.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Dense Optical Flow Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md31">Introduction</a></li>
<li class="level1"><a href="#autotoc_md32">Supported plaforms</a></li>
<li class="level1"><a href="#autotoc_md33">Data flow</a></li>
<li class="level1"><a href="#autotoc_md34">Steps to run the application on J7 EVM (Linux + RTOS mode)</a></li>
<li class="level1"><a href="#autotoc_md35">Steps to run the application on J7 EVM (QNX + RTOS mode)</a></li>
<li class="level1"><a href="#autotoc_md36">Steps to run the application on PC Linux x86_64</a></li>
<li class="level1"><a href="#autotoc_md37">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md31"></a>
Introduction</h1>
<p>This application shows a demo of the TI Dense Optical Flow (DOF) hardware accelerator (HWA). The demo takes as input a sequence of input 8b gray scale images in .png or .bmp file format. Each frame is run through dense optical flow OpenVX node. The flow vectors and confidence scores computed by DOF node are mapped based on a color palatte and output to files in .png or .bmp format, or to display if DISPLAY_OPTION is enabled.</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Supported plaforms</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform  </th><th class="markdownTableHeadNone">Linux x86_64  </th><th class="markdownTableHeadNone">Linux+RTOS mode  </th><th class="markdownTableHeadNone">QNX+RTOS mode  </th><th class="markdownTableHeadNone">SoC   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Support  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">YES  </td><td class="markdownTableBodyNone">J721e / J721S2 / J784S4   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md33"></a>
Data flow</h1>
<p>Note: On J721S2, the algorithms running on C66_1 and C66_2 have been recompiled and are running on the standalone C7X.</p>
<div class="image">
<img src="vx_app_dof_data_flow.png" alt="vx_app_dof_data_flow.png"/>
<div class="caption">
Data flow</div></div>
 <h1><a class="anchor" id="autotoc_md34"></a>
Steps to run the application on J7 EVM (Linux + RTOS mode)</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for Linux+RTOS mode</li>
<li>A sample "app_dof.cfg" for Dense Optical Flow is provided under "/opt/vision_apps/" on the rootfs partition. Update paths and other fields if necessary.</li>
<li>Run the app as shown below <div class="fragment"><div class="line">cd /opt/vision_apps</div><div class="line">source ./vision_apps_init.sh</div><div class="line">./run_app_dof.sh</div></div><!-- fragment --></li>
<li>Output will be sent to display.</li>
</ol>
<h1><a class="anchor" id="autotoc_md35"></a>
Steps to run the application on J7 EVM (QNX + RTOS mode)</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for QNX+RTOS mode</li>
<li>A sample "app_dof.cfg" for Dense Optical Flow is provided under "/ti_fs/vision_apps/" on the boot partition. Update paths and other fields if necessary.</li>
<li>Run the app as shown below <div class="fragment"><div class="line">cd /ti_fs/vision_apps</div><div class="line">. ./vision_apps_init.sh</div><div class="line">./run_app_dof.sh</div></div><!-- fragment --></li>
<li>Output will be sent to display.</li>
</ol>
<h1><a class="anchor" id="autotoc_md36"></a>
Steps to run the application on PC Linux x86_64</h1>
<ol type="1">
<li>Build the application and related libraries as mentioned in <a class="el" href="BUILD_INSTRUCTIONS.html">Build Instructions</a> for PC emulation mode</li>
<li>A sample "app.cfg" for Dense Optical Flow is provided under "${PSDKR_PATH}/vision_apps/apps/basic_demos/app_dof/config" folder.Update paths and other fields if necessary.</li>
<li>Run the app as shown below <div class="fragment"><div class="line">cd ${PSDKR_PATH}/vision_apps/out/PC/x86_64/LINUX/$PROFILE/</div><div class="line">./vx_app_dense_optical_flow --cfg ${PSDKR_PATH}/vision_apps/apps/basic_demos/app_dof/config/app.cfg</div></div><!-- fragment --></li>
<li>Output will be generated as .bmp files in the "output_file_path" folder specified in app.cfg</li>
<li>View the output images in any image viewer</li>
</ol>
<h1><a class="anchor" id="autotoc_md37"></a>
Sample Output</h1>
<p>Shown below is a example input and its corresponding output</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src="vx_app_dof_input.png" alt="vx_app_dof_input.png"/>
<div class="caption">
Input</div></div>
 </td><td><div class="image">
<img src="vx_app_dof_output2.png" alt="vx_app_dof_output2.png"/>
<div class="caption">
Output DOF Flow Vectors</div></div>
  </td><td><div class="image">
<img src="vx_app_dof_output1.png" alt="vx_app_dof_output1.png"/>
<div class="caption">
Output DOF Confidence Map, White is high confidence, Dark is low confidence</div></div>
   </td></tr>
</table>
<p>Shown below is a sample display on J7 EVM</p>
<div class="image">
<img src="vx_app_dof_evm_display.jpg" alt="vx_app_dof_evm_display.jpg"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
