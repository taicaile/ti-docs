<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>MMALIB User Guide: MMALIB_CNN_convolve_col_smallNo_ixX_ixX_oxX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MMALIB User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Sub Modules</a>  </div>
  <div class="headertitle">
<div class="title">MMALIB_CNN_convolve_col_smallNo_ixX_ixX_oxX<div class="ingroups"><a class="el" href="group__MMALIB__CNN.html">Convolutional Neural Networks (CNN) kernels</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Introduction</h2>
<p>Kernel for computing CNN-style 2D convolution using column major data ordering on the input and output feature maps. This approach computes more quickly if filter grouping is chosen such that Ni=No=1, or if filter grouping is chosen such that NiFrFc &lt; MMA_SIZE, otherwise use regular convolution method <a class="el" href="group__MMALIB__CNN__convolve__row__ixX__ixX__oxX.html">MMALIB_CNN_convolve_row_ixX_ixX_oxX</a>. This kernel is also referred to as depth-wise convolution. </p>
<p>The kernel is designed to process a pair of MMA-wide columns at a time, although processing a single column is supported. These two columns are typically adjacent columns in the same input feature map, although provisions are made in the interface for the two columns to come from separate input feature maps.</p>
<p>On C7100 devices, this kernel requires that the input feature maps are padded before they are passed to the kernel whereas other devices support padding inside this kernel.</p>
<p>This kernel differs from <a class="el" href="group__MMALIB__CNN__convolve__col__smallNo__highPrecision.html">MMALIB_CNN_convolve_col_smallNo_highPrecision</a> in that it requires all scale, shift and bias values to be the constant across all groups called at the same time. This restriction enables the same amount of input data to be processed in fewer cycles.</p>
<ul>
<li>Supports Ni == No for small values of No</li>
<li>8 and 16-bit integer data type support</li>
<li>3x3, 5x5 and 7x7(8-bit only) kernel sizes supported</li>
<li>Supports stride values of 1 or 2<ul>
<li>When stride == 2, the number of rows in an input feature map should be even, including the top and bottom pad &ndash; i.e. (pKerInitArgs-&gt;blockFeatureHeight + pKerInitArgs-&gt;topPad + pKerInitArgs-&gt;bottomPad) % 2 == 0</li>
<li>When stride == 2, the kernel size must be 3x3 or 5x5</li>
<li>When stride == 2 and the number of groups &gt; 1, then there must be space allocated for an even number of input feature map groups. &ndash; If the number of groups is odd (i.e. 5), then space in L2 memory must be allocated for the next largest even number of groups (i.e. 6) &ndash; This extra memory does not need to be initialized, but an exception will be generated if the addresses where the extra group would go &ndash; are outside the L2 memory region.</li>
</ul>
</li>
<li>May compute multiple groups in a single call</li>
</ul>
<p>The input data for this kernel consists of the filter coefficients and the input feature maps, while the output is the output feature maps. The kernel requires the filter coefficients to be preprocessed and stored in a custom arrangement prior to calling the kernel execute function. This reordering can be done offline (more efficient) or at runtime. MMALIB provides the utilities in <a class="el" href="group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX__reorderWeights.html">MMALIB_CNN_convolve_col_smallNo_ixX_ixX_oxX_reorderWeights</a> to generate this reordering (src0) and the associated <a class="el" href="structMMALIB__bufParams2D__t.html">MMALIB_bufParams2D_t</a> struct (src0_addr).</p>
<p>The input feature map memory arrangement is flexible and is described by the parameters illustrated in the the figure below. Note that the input feature maps for each groups must be vertically stacked on top of each other as there is no parameter to control the offset between groups. </p><div class="image">
<object type="image/svg+xml" data="convolve_col_inputFeatureMapInterface.svg" style="pointer-events: none;"></object>
</div>
 <p>The output feature map is described by the parameters illustrated in the the figure below. </p><div class="image">
<object type="image/svg+xml" data="convolve_col_outputFeatureMapInterface.svg" style="pointer-events: none;"></object>
</div>
  <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Sub Modules</h2></td></tr>
<tr class="memitem:group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX__reorderWeights"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX__reorderWeights.html">MMALIB_CNN_convolve_col_smallNo_ixX_ixX_oxX_reorderWeights</a></td></tr>
<tr class="memdesc:group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX__reorderWeights"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__MMALIB__CNN__convolve__col__smallNo__ixX__ixX__oxX.html">MMALIB_CNN_convolve_col_smallNo_ixX_ixX_oxX</a> requires that the weights be preprocessed into a specific arrangement. The functions in this module perform that preprocessing and other associated tasks. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
