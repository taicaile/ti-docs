<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>MCUSW: Fls User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MCUSW
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ug_fls_top.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Fls User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ug_fls_intro"></a>
Introduction</h1>
<p>This document details AUTOSAR BSW Flash module implementation</p><ul>
<li>Supported AUTOSAR Release <b>: 4.3.1</b></li>
<li>Supported Configuration Variants <b>: Pre-Compile, Post-Build</b></li>
<li>Vendor ID <b>: FLS_VENDOR_ID (44)</b></li>
<li>Module ID <b>: FLS_MODULE_ID (92)</b></li>
</ul>
<p>The Flash Driver provides services for reading, writing, erasing flash memory and Execute-in-Place (XIP) mode for external Flash Device. The driver supports MT35XU512ABA1G12 and S28HS512T OSPI Flash Devices. The main tasks of the FLS driver are:</p><ul>
<li>Perform storage mode applications:<ul>
<li>Read from flash.</li>
<li>Write to flash.</li>
<li>Erase Flash.</li>
<li>Compare and Blank Check flash memory location.</li>
</ul>
</li>
<li>Execute application using XIP Mode (only XIP read supported).</li>
</ul>
<hr/>
 <h1><a class="anchor" id="ug_fls_design"></a>
Fls Driver Architecture/Design</h1>
<p>Please refer the Flash design, which is included as part of release (<a class="el" href="design_fls_top.html">Fls Design Document</a>)</p>
<hr/>
 <h1><a class="anchor" id="ug_fls_functional_top"></a>
Functional Description</h1>
<p>The Fls Module uses internal OSPI peripheral as the serial bus to transfer data to and from the attached flash device.</p>
<p>Programming of clock source for the flash, is beyond the scope of this document. The Clock programming is taken care by the test application.</p>
<p>1 Fls instance is supported by this driver implementation (in MCU1_0 domain).</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg"></a>
Configuration</h2>
<p>The Fls Driver implementation supports multiple configuration variants (refer section <a class="el" href="ug_fls_top.html#ug_fls_intro">Introduction</a>), the driver expects generated <b><a class="el" href="Fls__Cfg_8h.html" title="This file contains generated pre compile configuration file for FLS MCAL driver.">Fls_Cfg.h</a> </b> to be present as (<a class="el" href="ug_fls_top.html#ug_fls_functional_filestruct_top">File Structure</a>). Please refer (<a class="el" href="mcusw_c_ug_top.html#mcusw_build_top">Build</a>) to specify path to generated configuration. The associated Fls configuration generated files <b>Fls_Cfg.c</b>, and <b>Fls_PBcfg.c</b> to be present as shown (<a class="el" href="ug_fls_top.html#ug_fls_functional_filestruct_top">File Structure</a>)</p>
<p>The following section details on the unsupported features and additional features added.</p>
<hr/>
 <h3><a class="anchor" id="ug_fls_functional_cfg_v"></a>
Variance / Deviation from the specification</h3>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_dacEnable"></a>
FlsDacEnable</h4>
<p>This parameter is the switch between Direct Access Mode (DAC) and Indirect Access Mode (INDAC) used by the OSPI module to communicate with the Flash Device. The Flash will be memory mapped when running in DAC mode, and execution in place will happen directly from flash memory. In INDAC mode, data transfer between system memory and external flash occurs through the internal SRAM.</p>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_xipEnable"></a>
FlsXipEnable</h4>
<p>This parameter is the switch to turn on or off XIP mode. Only XIP Read mode is supported in current driver. XIP mode will only be functional in DAC mode of operation.</p>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_ospiClkSpeed"></a>
FlsOspiClkSpeed</h4>
<p>This parameter defines the Clock Speed for the OSPI peripheral. The supported clock speeds are as follows:</p><ol type="1">
<li>133Mhz (133333333U) - This Clock freq works with all modes of the Flash Driver.</li>
<li>166Mhz (166666666U) - This Clock freq is fully supported in INDAC mode of operations. In DAC mode, only read operation is supported.</li>
</ol>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_dtrEnable"></a>
FlsDtrEnable</h4>
<p>This parameter is the switch between Double Transfer Rate (DTR) and Single Transfer Rate (STR) for OSPI Flash.</p>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_phyEnable"></a>
FlsPhyEnable</h4>
<p>This parameter is the switch to turn on and off PHY mode.</p>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_cfg_v_"></a>
Features that are not supported:</h4>
<p>Following features outlined in Specification are not supported:</p>
<ol type="1">
<li>Fast vs Normal Mode - J721-EVM only has one mode of execution for OSPI Flash. Only normal mode is supported. Relevant features not implemented include:     1. FlsSetModeAPI     2. FlsDefaultMode     3. FlsMaxReadFastMode     4. FlsMaxWriteFastMode</li>
<li>Access Code Placement - Write and Erase in XIP mode is not supported. Only Read in XIP implemented. Relevant features not implemented include:<ol type="a">
<li>FlsAcLoadOnJobStart</li>
<li>FlsAcErase</li>
<li>FlsAcWrite</li>
</ol>
</li>
<li>Erase/Write Verification - Compare and BlankCheck APIs can be used for verification purposes. Relevant features not implemented include:<ol type="a">
<li>FlsEraseVerificationEnabled</li>
<li>FlsWriteVerificationEnabled</li>
</ol>
</li>
<li>Timeout Supervision - Relevant features not implemented include:<ol type="a">
<li>FlsTimeoutSupervision</li>
<li>FlsCallCycle</li>
</ol>
</li>
<li>FlsSector - Internal Flash Device Info structure used instead of FlsSector<ol type="a">
<li>Fls_NorOspiInfo structure is used by driver for flash device information.</li>
</ol>
</li>
<li>Fls_Cancel API is not supported.</li>
<li>DET RunTime Error is not supported. DET Dev Errors and DET Transient Faults are supported.</li>
</ol>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
<hr/>
<h3><a class="anchor" id="ug_fls_functional_i_cfg_s_api_top"></a>
Non Standard Service APIs</h3>
<hr/>
 <h4><a class="anchor" id="ug_fls_functional_i_cfg_s_api_rb"></a>
Ospi_RegisterReadback</h4>
<p>As noted from the previous MCAL implementation, some of the critical configuration registers could potentially be corrupted by other entities (s/w or h/w). One of the recommended detection methods would be to periodically read-back the configuration and confirm configuration is consistent. The service API defined below shall be implemented to enable this detection</p>
<table class="doxtable">
<tr>
<td><em><b> </b></em> </td><td><em><b>Description</b></em> </td><td><em><b> Comments</b></em>  </td></tr>
<tr>
<td><em><b>Service Name</b></em> </td><td>Ospi_RegisterReadback </td><td>Can potentially be turned OFF (Refer to Design Document provided in CSP)   </td></tr>
<tr>
<td><em><b>Syntax</b></em> </td><td>Ospi_RegisterReadback( P2VAR(CSL_ospi_flash_cfgRegs, AUTOMATIC, SPI_APPL_DATA) RegRbPtr)  </td><td>E_OK: Register read back has been done, E_NOT_OK: Register read back failed   </td></tr>
<tr>
<td><em><b>Service ID </b></em> </td><td>NA  </td><td></td></tr>
<tr>
<td><em><b>Sync / Async </b></em> </td><td>Sync </td><td></td></tr>
<tr>
<td><em><b>Reentrancy</b></em> </td><td>Reentrant </td><td></td></tr>
<tr>
<td><em><b>Parameter in</b></em> </td><td>None </td><td></td></tr>
<tr>
<td><em><b>Parameters out</b></em> </td><td>RegRbPtr  </td><td>Pointer to where to store the readback values. If this pointer is NULL_PTR, then the API will return E_NOT_OK.   </td></tr>
<tr>
<td><em><b>Return Value</b></em> </td><td>Std_ReturnType </td><td>E_OK, E_NOT_OK   </td></tr>
</table>
<hr/>
<h4><a class="anchor" id="ug_fls_functional_i_cfg_s_api_Ie"></a>
Fls_dataOverflowUnderflowIntrEnable</h4>
<p>This API Enable Under/Overflow Interrupts of the hardware unit and returns the status.</p>
<table class="doxtable">
<tr>
<td><em><b> </b></em> </td><td><em><b>Description</b></em> </td><td><em><b> Comments</b></em>  </td></tr>
<tr>
<td><em><b>Service Name</b></em> </td><td>Fls_dataOverflowUnderflowIntrEnable </td><td>Fls_dataOverflowUnderflowIntrEnable Enable Under/Overflow Interrupts of the hardware unit   </td></tr>
<tr>
<td><em><b>Syntax</b></em> </td><td>Fls_dataOverflowUnderflowIntrEnable(uint32 intrFlag)  </td><td></td></tr>
<tr>
<td><em><b>Service ID </b></em> </td><td>NA  </td><td></td></tr>
<tr>
<td><em><b>Sync / Async </b></em> </td><td>Sync </td><td></td></tr>
<tr>
<td><em><b>Reentrancy</b></em> </td><td>Reentrant </td><td></td></tr>
<tr>
<td><em><b>Parameter in</b></em> </td><td>intrFlag </td><td>Interrupt Enable flag for Underflow=2U Interrupt Enable flag for Overflow=128U  </td></tr>
<tr>
<td><em><b>Parameters out</b></em> </td><td>NA </td><td></td></tr>
<tr>
<td><em><b>Return Value</b></em> </td><td>Std_ReturnType </td><td>E_OK: Interrupt Enabled E_NOT_OK: Interrupt Enable failed   </td></tr>
</table>
<hr/>
<h4><a class="anchor" id="ug_fls_functional_i_cfg_s_api_Id"></a>
Fls_dataOverflowUnderflowIntrDisable</h4>
<p>This API Disable Under/Overflow Interrupts of the hardware unit and returns the status.</p>
<table class="doxtable">
<tr>
<td><em><b> </b></em> </td><td><em><b>Description</b></em> </td><td><em><b> Comments</b></em>  </td></tr>
<tr>
<td><em><b>Service Name</b></em> </td><td>Fls_dataOverflowUnderflowIntrDisable </td><td>Spi_dataOverflowUnderflowIntrDisable Disable Under/Overflow Interrupts of the hardware unit and returns the status.  </td></tr>
<tr>
<td><em><b>Syntax</b></em> </td><td>Fls_dataOverflowUnderflowIntrDisable(uint32 intrFlag)  </td><td></td></tr>
<tr>
<td><em><b>Service ID </b></em> </td><td>NA  </td><td></td></tr>
<tr>
<td><em><b>Sync / Async </b></em> </td><td>Sync </td><td></td></tr>
<tr>
<td><em><b>Reentrancy</b></em> </td><td>Reentrant </td><td></td></tr>
<tr>
<td><em><b>Parameter in</b></em> </td><td>intrFlag </td><td>Interrupt Disable flag for Underflow=2U Interrupt Disable flag for Overflow=128U  </td></tr>
<tr>
<td><em><b>Parameters out</b></em> </td><td>NA </td><td></td></tr>
<tr>
<td><em><b>Return Value</b></em> </td><td>Std_ReturnType </td><td>E_OK: Interrupt Disabled E_NOT_OK: Interrupt Disabled failed   </td></tr>
</table>
<hr/>
<h4><a class="anchor" id="ug_fls_functional_i_cfg_s_api_Is"></a>
Fls_dataOverflowUnderflowIntrGetStatus</h4>
<p>This API gets status of Under/Overflow Interrupts of the hardware unit and returns the status.</p>
<table class="doxtable">
<tr>
<td><em><b> </b></em> </td><td><em><b>Description</b></em> </td><td><em><b> Comments</b></em>  </td></tr>
<tr>
<td><em><b>Service Name</b></em> </td><td>Fls_dataOverflowUnderflowIntrGetStatus </td><td>Fls_dataOverflowUnderflowIntrGetStatus gets status of Under/Overflow Interrupts of the hardware unit  </td></tr>
<tr>
<td><em><b>Syntax</b></em> </td><td>Fls_dataOverflowUnderflowIntrGetStatus(uint32 intFlags)  </td><td></td></tr>
<tr>
<td><em><b>Service ID </b></em> </td><td>NA  </td><td></td></tr>
<tr>
<td><em><b>Sync / Async </b></em> </td><td>Sync </td><td></td></tr>
<tr>
<td><em><b>Reentrancy</b></em> </td><td>Reentrant </td><td></td></tr>
<tr>
<td><em><b>Parameter in</b></em> </td><td>intrFlag </td><td>Interrupt Enable flag   </td></tr>
<tr>
<td><em><b>Parameters out</b></em> </td><td>NA </td><td></td></tr>
<tr>
<td><em><b>Return Value</b></em> </td><td>ospiIrqstatus </td><td>OSPI_NO_EVENT: No underflow event OSPI_EVENT_PENDING: Underflow Event OSPI_STATUS_READ_FAIL: Status read fail   </td></tr>
</table>
<hr/>
<h4><a class="anchor" id="ug_fls_functional_i_cfg_s_api_Isc"></a>
Fls_dataOverflowUnderflowIntrStatusClear</h4>
<p>This API clear Under/Overflow Interrupts of the hardware unit and returns the status.</p>
<table class="doxtable">
<tr>
<td><em><b> </b></em> </td><td><em><b>Description</b></em> </td><td><em><b> Comments</b></em>  </td></tr>
<tr>
<td><em><b>Service Name</b></em> </td><td>Fls_dataOverflowUnderflowIntrStatusClear </td><td>Fls_dataOverflowUnderflowIntrStatusClear clear Under/Overflow Interrupts of the hardware unit and returns the status.  </td></tr>
<tr>
<td><em><b>Syntax</b></em> </td><td>Fls_dataOverflowUnderflowIntrStatusClear(uint32 intrFlag)  </td><td></td></tr>
<tr>
<td><em><b>Service ID </b></em> </td><td>NA  </td><td></td></tr>
<tr>
<td><em><b>Sync / Async </b></em> </td><td>Sync </td><td></td></tr>
<tr>
<td><em><b>Reentrancy</b></em> </td><td>Reentrant </td><td></td></tr>
<tr>
<td><em><b>Parameter in</b></em> </td><td>intrFlag </td><td>Interrupt Enable flag for Underflow=2U Interrupt Enable flag for Overflow=128U   </td></tr>
<tr>
<td><em><b>Parameters out</b></em> </td><td>NA </td><td></td></tr>
<tr>
<td><em><b>Return Value</b></em> </td><td>Std_ReturnType </td><td>E_OK: Interrupt status clears E_NOT_OK: Interrupt status clear failed   </td></tr>
</table>
<p><a class="el" href="ug_cdd_ipc_top.html#ug_cdd_ipc_intro">Back To Top</a></p>
<hr/>
<h2><a class="anchor" id="ug_fls_functional_cfg_constraints"></a>
Constraints</h2>
<p>The driver can have unexpected behavior and loss of functionality if unsupported values are passed into configurator or unsupported combinations are used. Below is a list of such constraints.</p>
<ul>
<li>Configurator Input Values Constraints:<ol type="1">
<li>maxReadNormalMode and maxWriteNormalMode values should be aligned with (multiples of) the Flash device page size.</li>
<li>sectorList structure should not be changed, as that is specific to Flash Device.</li>
<li>ospiClkSpeed should be either 133333333U or 166666666U.</li>
</ol>
</li>
<li>Feature Combination Constraints:<ol type="1">
<li>When using Interrupt mode, dacEnable should be set to FALSE. Interrupt mode is only available when using INDAC mode.</li>
<li>When using Interrupt mode, maxWriteNormalMode value has to be equal to page size of flash device. Please see Fls_Cfg_intr.c sample configuration file provided.</li>
<li>If operating in XIP mode, dacEnable has to be enabled, and Interrupt mode has to be set to STD_OFF. Please refer to the SOC user manual for SOC specific constraints.</li>
<li>In Interrupt mode, BlankCheck API and Compare API are not supported and should be disabled.</li>
<li>Please refer to the SOC user manual for SOC specific constraints.</li>
</ol>
</li>
</ul>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg_int"></a>
Interrupt Configuration</h2>
<p>The Driver does not register any interrupt service routine(ISR), it’s expected that consumer of this driver registers the required interrupt handler.</p>
<p>The interrupt number associated with instance of the Fls is detailed in TRM. Please refer FlsApp_InterruptConfig() in fls_app test application for reference.</p>
<p>Please note that interrupt implementation is only available when running with INDAC mode. BlankCheck and Compare APIs are not supported with interrupt mode.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg_pwr"></a>
Power-up</h2>
<p>The driver doesn't configure the functional clock and power for the Fls modules. It's expected that secondary boot loader(SBL) power-up the required modules. Please refer SBL documentation.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg_execute_in_place"></a>
Execute-In-Place with Write capability</h2>
<p>To test FLS capability of executing a program from flash, as well as write/erase to flash, fls_app_xip can used. Below are some important points to note.</p>
<ol type="1">
<li>Keep XIP enable flag set to OFF (keep XIP disabled).</li>
<li>This will still ensure that execution from flash is possible (since we have the MMU region configuration, execution from flash is allowed with XIP disabled).</li>
<li>This will also allow writing to flash after execution is completed.</li>
<li>There is a downside to this approach - PHY module will need to be disabled. PHY module gives a boost to performance by almost 34%. Currently, with PHY enabled, execution from flash fails. This will need to be debugged further and targeted for later date.</li>
</ol>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg_phy_tune"></a>
PHY Tune Module Algorithm</h2>
<p>There PHY algorthm used in J7200 and J721E is based on calibration algorithm. So, the Phy tune data vector must first be flashed into the last sector of flash memory, and then during first read operation, Phy tune will be calibrated.</p>
<p>The example application can be used as reference for this.</p>
<p>Some restrictions that Fls driver has right now with respect to the SoC:</p><ol type="1">
<li>Phy Tune should only be enabled for DAC mode.</li>
<li>The algorithm vector should be flash to last sector in memery.</li>
<li>For J721E, the algorthm vector can be written using DAC or INDAC mode.</li>
<li>For J7200, the algorithm can only be written using INDAC mode, as write/erase is not functional on J7200 in this release.</li>
</ol>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_driver_adaption"></a>
Driver Adaption for QSPI and new FLASH device</h2>
<p>Current FLS driver uses OSPI protocol and supports the two NOR Flash devices for J721E and J7200 (MT35XU512ABA1G12 S28HS512T).</p>
<p>If variation to the supported features are needed, user will need to take care to modify the driver to accommodate changes.</p>
<ol type="1">
<li>Configuring QSPI</li>
</ol>
<ul>
<li>Files that contain OSPI protocol configuration are: Fls_Ospi.c, Fls_Ospi.h. Similar files will need to be added for QSPI protocol configuration. These files should contain the QSPI APIs used for transferring data and configuring QSPI controller. Please refer to TRM for details on how to program QSPI.</li>
<li>The interface files (Fls_Spi_Intf.c, Fls_Spi_Intf.h) will need to be modified to call QSPI specific APIs instead of the OSPI specific ones (which is current configuration).</li>
<li>Lastly, the board config files (Fls_Brd_Nor_xspi.c) will need slight modification to ensure that Flash Device is configured correction when using QSPI mode.</li>
</ul>
<ol type="1">
<li>Integrating new Flash Device</li>
</ol>
<ul>
<li>Each flash device will need to have its own header file which defines device specific commands. If a new Flash device is integrated, such a header file will need to be created and included by the driver files. Examples of such header files are Fls_NOR_m35xu512.h and Fls_NOR_s28hs512t.h.</li>
<li>Next, the board configuration files (Fls_Brd_Nor_Ospi.c, etc.) will need to be modified to work with the new flash device. The APIs in the board configuration files are used to set the flash device settings. They should be carefully modified to ensure that correct commands are being written on the flash device. This can be done based on the flash device specification.</li>
<li>Note: Writing incorrect commands can break the flash device and make is obsolete. Proper care should be taken to ensure integration had been done correctly.</li>
<li>Note: The PHY tuning algorithm described in above section is specific to currently supported flash devices. Please note that the algorithm is not expected to work with other flash devices.</li>
</ul>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_cfg_build"></a>
Build and Running the Application</h2>
<p>Please follow steps detailed in section (<a class="el" href="mcusw_c_ug_top.html#mcusw_build_top">Build</a>) to build library or example. Please note that OSPI Boot mode is not applicable for Fls module.</p>
<p>The below Fls Test Applications are available:</p><ol type="1">
<li>fls_app_dac - Test Application to demo DAC storage mode</li>
<li>fls_app_indac - Test Application to demo INDAC storage mode</li>
<li>fls_app_xip - Test Application to demo XIP Read mode (uses fls_xip as the application that runs on flash).</li>
<li>fls_app - General application, can be used to test interrupt based INDAC storage mode (need to change <a class="el" href="Fls__Cfg_8h.html" title="This file contains generated pre compile configuration file for FLS MCAL driver.">Fls_Cfg.h</a> to enable interrupt mode)</li>
<li>fls_xip - Simple "PokeMem" application built to run in XIP mode from the flash device. This application should be flashed at certain flash address and can be triggered when running fls_app.</li>
</ol>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_run_example"></a>
Steps to run example application</h2>
<p>Please follow steps detailed in section (<a class="el" href="mcusw_c_ug_top.html#mcusw_build_top">Build</a>) to build example</p>
<p><b> Poll Mode - Storage Mode </b></p>
<p>Test Applications fls_app_dac and fls_app_indac will run as packaged, just build and the executable will be generated.</p>
<p><b> Interrupt Mode - Storage Mode </b></p>
<p>To test interrupt based INDAC storage mode using fls_app, enable interrupts by changing element "FLS_USE_INTERRUPTS" in <a class="el" href="Fls__Cfg_8h.html" title="This file contains generated pre compile configuration file for FLS MCAL driver.">Fls_Cfg.h</a> file to "STD_ON" (use Fls_Cfg_Intr_Sample.h as reference). Then build fls_app and run.</p>
<p><b> XIP Mode </b></p>
<p>To test XIP read mode, follow below steps:</p><ol type="1">
<li>Build fls_xip demo application.</li>
<li>Using TI Uniflash tool, flash the binary image of fls_xip. Refer to (<a class="el" href="ug_fls_top.html#ug_fls_functional_run_example_flash">Steps to Flash</a>)</li>
<li>Ensure to switch the Board setting back to the boot mode you wish to use.</li>
<li>Build fls_app_xip and run the executable.</li>
</ol>
<h3><a class="anchor" id="ug_fls_functional_run_example_flash"></a>
Steps to Flash</h3>
<p>Install Uniflash 6.1.0 from <a href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a></p>
<p>For using OSPI the SW3 switch setting should be : 0XXX_XXXX_XX</p>
<p>Specific SW setting for different boot modes-</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Mode  </th><th class="markdownTableHeadNone">Switch Settings   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UART  </td><td class="markdownTableBodyNone">SW8: 0000_0000, SW9: 0111_0000   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OSPI (J721E)  </td><td class="markdownTableBodyNone">SW8: 0000_0000, SW9: 0100_0000   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OSPI (J7200)  </td><td class="markdownTableBodyNone">SW8: 1000_0010, SW9: 0011_0000   </td></tr>
</table>
<p>Please refer to the SoC user manual for other SoCs.</p>
<ul>
<li>Change the boot mode to UART boot mode.</li>
<li>Connect to the second instance of UART (/dev/ttyUSB1 in linux, COMxx in Windows) and power on. One should see 'CCC...' being printed on the console. Once validated, note down the instance number and close the instance of the UART (the UART device needs to be free to transfer data)</li>
<li>Navigate to the uniflash installed directory, dslite.sh should be present here.</li>
<li>Run the following commands to flash<ol type="1">
<li>UART SBL and sysfw : ./dslite.sh &ndash;mode processors -c /dev/ttyUSB1 -f (Path to Uniflash Install Directory)/processors/FlashWriter/(SOC)_evm/uart_(SOC)_evm_flash_programmer_release.tiimage -i 0</li>
<li>fls_xip bin image : ./dslite.sh &ndash;mode processors -c /dev/ttyUSB1 -f (path to mcusw}/mcusw/binary/fls_xip/bin/(SOC)_evm/fls_xip_mcu1_0_release.xer5f.bin -d 3 -o e0000</li>
</ol>
</li>
</ul>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_dep_top"></a>
Dependencies on SW Modules</h2>
<hr/>
 <h3><a class="anchor" id="ug_fls_functional_dep_det"></a>
DET</h3>
<p>This implementation depends on the DET in order to report development errors and can be turned OFF. Refer section (<a class="el" href="ug_fls_top.html#ug_fls_error_dev">Development Error Reporting</a>) for detailed error codes.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h3><a class="anchor" id="ug_fls_functional_dep_schm"></a>
SchM</h3>
<p>This implementation requires one level of exclusive access to guard critical sections. Invokes SchM_Enter_Fls_FLS_EXCLUSIVE_AREA_0 (), SchM_Exit_Fls_FLS_EXCLUSIVE_AREA_0 () to enter critical section and exit.</p>
<p>In the example implementation (<a class="el" href="ug_fls_top.html#ug_fls_functional_filestruct_top">File Structure</a> SchM_Fls.c) , all the interrupts on CPU are disabled. However, disabling of the enabled Fls interrupt should suffice.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h3><a class="anchor" id="ug_fls_functional_dep_memif"></a>
MemIf</h3>
<p>This implementation depends on MemIf module and uses its imported types such as MemIf_JobResultType, MemIf_ModeType and MemIf_StatusType.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h3><a class="anchor" id="ug_fls_functional_dep_fee"></a>
Fee</h3>
<p>This implementation depends on Fee module for callback notification to notify the module environment about job end and job error.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_functional_filestruct_top"></a>
File Structure</h2>
<div class="image">
<img src="fls_design_dir_structure_main0.png" alt="fls_design_dir_structure_main0.png"/>
<div class="caption">
Detailed Directory Structure</div></div>
<ol type="1">
<li>Driver implemented by : <a class="el" href="Fls_8h.html" title="This file contains interface header for Fls MCAL driver.">Fls.h</a>, <a class="el" href="Fls__Irq_8h.html" title="This file contains ISR function declaration for FLS MCAL driver.">Fls_Irq.h</a>, Fls.c, Fls_Brd_Nor_Ospi.c, Fls_Brd_Nor_Xspi.c, Fls_Irq.c, Fls_Ospi.c, Fls_Spi_Intf.c, Fls_Soc.c, Fls_Soc.h, Fls_Spi_Intf.h, Fls_Ospi.h and Fls_Brd_Nor.h</li>
<li>Example Configuration by : <a class="el" href="Fls__Cfg_8h.html" title="This file contains generated pre compile configuration file for FLS MCAL driver.">Fls_Cfg.h</a>, Fls_Cfg.c, Fls_Cfg_dac.c, Fls_Cfg_indac.c, Fls_Cfg_xip.c and Fls_PBcfg.c</li>
<li>Example Application by : FlsApp.c and FlsApp_Startup.c</li>
<li>Phy tune algorithm files: nor_spi_patterns.c, nor_spi_patterns.h, nor_spi_phy_tune.c and nor_spi_phy_tune.h</li>
</ol>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_fls_error_top"></a>
Error Handling</h1>
<hr/>
 <h2><a class="anchor" id="ug_fls_error_dev"></a>
Development Error Reporting</h2>
<p>Development errors are reported to the DET using the service Det_ReportError(), when enabled. The driver interface (<a class="el" href="Fls_8h.html" title="This file contains interface header for Fls MCAL driver.">Fls.h</a>) lists the SID.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_error_codes"></a>
Error codes</h2>
<table class="doxtable">
<tr>
<td><em><b> Type of Error </b></em> </td><td><em><b> Related Error code </b></em> </td><td><em><b> Value (Hex)</b></em>  </td></tr>
<tr>
<td>API service called with wrong parameter  </td><td>FLS_E_PARAM_CONFIG  </td><td>0x01   </td></tr>
<tr>
<td>API service called with wrong parameter  </td><td>FLS_E_PARAM_ADDRESS  </td><td>0x02   </td></tr>
<tr>
<td>API service called with wrong parameter  </td><td>FLS_E_PARAM_LENGTH  </td><td>0x03   </td></tr>
<tr>
<td>API service called with wrong parameter  </td><td>FLS_E_PARAM_DATA  </td><td>0x04   </td></tr>
<tr>
<td>API service used without module initialization  </td><td>FLS_E_UNINIT  </td><td>0x05   </td></tr>
<tr>
<td>API called when module is busy  </td><td>FLS_E_BUSY  </td><td>0x06   </td></tr>
<tr>
<td>API called with a Null Pointer  </td><td>FLS_E_PARAM_POINTER  </td><td>0x0A   </td></tr>
</table>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_error_transient"></a>
Transient Faults Reporting</h2>
<p>Transient errors are reported to the DET using the service Det_reportDetTransientFault(). The driver interface (<a class="el" href="Fls_8h.html" title="This file contains interface header for Fls MCAL driver.">Fls.h</a>) lists the SID.</p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_fault_codes"></a>
Fault codes</h2>
<table class="doxtable">
<tr>
<td><em><b> Type of Error </b></em> </td><td><em><b> Related Error code </b></em> </td><td><em><b> Value (Hex)</b></em>  </td></tr>
<tr>
<td>Flash Erase Failed in HW  </td><td>FLS_E_ERASE_FAILED  </td><td>0x01   </td></tr>
<tr>
<td>Flash Write Failed in HW  </td><td>FLS_E_WRITE_FAILED  </td><td>0x02   </td></tr>
<tr>
<td>Flash Read Failed in HW  </td><td>FLS_E_READ_FAILED  </td><td>0x03   </td></tr>
<tr>
<td>Flash Compare Failed in HW  </td><td>FLS_E_COMPARE_FAILED  </td><td>0x04   </td></tr>
<tr>
<td>Expected HW ID not matched  </td><td>FLS_E_UNEXPECTED_FLASH_ID  </td><td>0x05  </td></tr>
</table>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_fls_api_top"></a>
API Description</h1>
<p>The AUTOSAR BSW Flash Driver specification details the APIs required for Flash Driver. Please refer to (Refer to Design Document provided in CSP) for detailed API description.</p>
<p><a class="el" href="group__MCAL__FLS__API.html">Refer API Documentation for details</a></p>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_fls_eg_top"></a>
Example Application</h1>
<p>The example application demonstrates use of Fls module, the list below identifies key steps performed the example. The configuration file is present at (<a class="el" href="ug_fls_top.html#ug_fls_functional_filestruct_top">File Structure</a>).</p>
<p><b> Polled Storage Mode (fls_app_dac and fls_app_indac) </b></p>
<ul>
<li>Initializes “Result Status Flags: Fls_JobDoneSuccess and Fls_JobDoneError”</li>
<li>Perform Pinmux configuration needed and initializes Board.</li>
<li>Core Application ()<ul>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa6682ec98d2c2ea3b5fd4e4f5d8cfd95" title="Initializes the Flash Driver.">Fls_Init()</a> - Takes FlsConfigSet as input and Initializes Flash and OSPI</li>
<li>Fls_OSPI_configClk () - Configure the OSPI Clocks</li>
<li>Set starting address to base address of flash device, and data size to 1M Bytes</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga2c8d35bb12ac249601aa549cba45a0c7" title="This service returns the version information of this module.">Fls_GetVersionInfo()</a> - Prints module version info</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga61475a08803af70c7b6db50be155f1ce" title="Returns the driver state.">Fls_GetStatus()</a> - Gets the Module status</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa52bda52355e930bea7c2faaaf884419" title="Erases flash sector(s).">Fls_Erase()</a> - Submits Erase job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga860eef1733a2b7f73d44b3ebfbe43c4b" title="The function Fls_BlankCheck shall verify, whether a given memory area has been erased but not (yet) p...">Fls_BlankCheck()</a> - Submits BlankCheck job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gada4339331973ea2492d185308dc21f3f" title="Writes one or more complete flash pages.">Fls_Write()</a> - Submits Write job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga210032e0bbdc366f9837c46c81e90b58" title="Reads from flash memory..">Fls_Read()</a> - Submits Read job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gaefd5f87c638db46497b02a1e4a93b6fa" title="Compares the contents of an area of flash memory with that of an application data buffer.">Fls_Compare()</a> - Submits Compare job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
</ul>
</li>
</ul>
<p><b> XIP Mode (fls_app_xip) </b></p>
<ul>
<li>Initializes “Result Status Flags: Fls_JobDoneSuccess and Fls_JobDoneError”</li>
<li>Configure the memory region for XIP.</li>
<li>Perform Pinmux configuration needed and initializes Board.</li>
<li>Core Application ()<ul>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa6682ec98d2c2ea3b5fd4e4f5d8cfd95" title="Initializes the Flash Driver.">Fls_Init()</a> - Takes FlsConfigSet as input and Initializes Flash and OSPI</li>
<li>Fls_OSPI_configClk () - Configure the OSPI Clocks</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga2c8d35bb12ac249601aa549cba45a0c7" title="This service returns the version information of this module.">Fls_GetVersionInfo()</a> - Prints module version info</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga61475a08803af70c7b6db50be155f1ce" title="Returns the driver state.">Fls_GetStatus()</a> - Gets the Module status</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa52bda52355e930bea7c2faaaf884419" title="Erases flash sector(s).">Fls_Erase()</a> - Submits Erase job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga860eef1733a2b7f73d44b3ebfbe43c4b" title="The function Fls_BlankCheck shall verify, whether a given memory area has been erased but not (yet) p...">Fls_BlankCheck()</a> - Submits BlankCheck job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gada4339331973ea2492d185308dc21f3f" title="Writes one or more complete flash pages.">Fls_Write()</a> - Submits Write job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li>Calls main function from the fls_xip app that is stored on the flash device.</li>
<li>After executing the XIP application, control returns back and prints returned value.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga210032e0bbdc366f9837c46c81e90b58" title="Reads from flash memory..">Fls_Read()</a> - Submits Read job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gaefd5f87c638db46497b02a1e4a93b6fa" title="Compares the contents of an area of flash memory with that of an application data buffer.">Fls_Compare()</a> - Submits Compare job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
</ul>
</li>
</ul>
<p><b> Interrupt Storage Mode (fls_app) </b></p>
<ul>
<li>Initializes “Result Status Flags: Fls_JobDoneSuccess and Fls_JobDoneError”</li>
<li>Perform Pinmux configuration needed and initializes Board.</li>
<li>FlsApp_InterruptConfig()<ul>
<li>Register the Interrupt and ISR</li>
</ul>
</li>
<li>Core Application ()<ul>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa6682ec98d2c2ea3b5fd4e4f5d8cfd95" title="Initializes the Flash Driver.">Fls_Init()</a> - Takes FlsConfigSet as input and Initializes Flash and OSPI</li>
<li>Fls_OSPI_configClk () - Configure the OSPI Clocks</li>
<li>Set starting address to base address of flash device, and data size to 1M Bytes</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga2c8d35bb12ac249601aa549cba45a0c7" title="This service returns the version information of this module.">Fls_GetVersionInfo()</a> - Prints module version info</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga61475a08803af70c7b6db50be155f1ce" title="Returns the driver state.">Fls_GetStatus()</a> - Gets the Module status</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gaa52bda52355e930bea7c2faaaf884419" title="Erases flash sector(s).">Fls_Erase()</a> - Submits Erase job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gada4339331973ea2492d185308dc21f3f" title="Writes one or more complete flash pages.">Fls_Write()</a> - Submits Write job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
<li><a class="el" href="group__MCAL__FLS__API.html#ga210032e0bbdc366f9837c46c81e90b58" title="Reads from flash memory..">Fls_Read()</a> - Submits Read job</li>
<li><a class="el" href="group__MCAL__FLS__API.html#gabf72273898a4263006a8a3155cc890dc" title="Performs the processing of jobs.">Fls_MainFunction()</a> - Called in while loop, processes job, and exits when Fls_JobEndNotification/Fls_JobErrorNotification reached.</li>
</ul>
</li>
</ul>
<p><b> Performance Measurements </b></p><ul>
<li>You can turn on the performance measurements for the storage mode app by enabling the "PERF_TEST" macro in FlsApp.c. This is disabled by default.</li>
</ul>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h2><a class="anchor" id="ug_fls_eg_log"></a>
Example Log</h2>
<h3><a class="anchor" id="ug_fls_eg_log_fls_app_dac"></a>
fls_app_dac</h3>
<pre class="fragment">    FLS_APP_DAC:                                                                    
    ------------------FLS Sample Application - STARTS !!! ------------------        
    FLS_APP_DAC:                                                                    
     Running on J7 ES                                                               
    FLS_APP_DAC: FLS spi_test Initiating and Starting.                              
    FLS_APP_DAC: Variant - Pre Compile being used !!!                               
    FLS_APP_DAC: Configuring Clocks.                                                
    FLS_APP_DAC: Clock Configured at 166666666Hz                                    

    FLS MCAL Version Info                                                           
    ---------------------                                                           
    Vendor ID           : 44                                                        
    Module ID           : 92                                                        
    SW Major Version    : 1                                                         
    SW Minor Version    : 2                                                         
    SW Patch Version    : 1                                                         

    FLS_APP_DAC: DATA SIZE TEST is 0x100000                                         
    FLS_APP_DAC: Offset is 0x0                                                      
    FLS_APP_DAC: Writing PHY Tune Data to last sector in memory                     
    FLS_APP_DAC: Erasing                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Blank Checking                                                     
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Writing                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Comparing                                                          
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Writing PHY Tune Data complete                                     
    FLS_APP_DAC: Erasing                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Blank Checking                                                     
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Writing                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC:                                                                    
     Write 1048576 bytes at transfer rate 650 Kbps                                  
    FLS_APP_DAC: Reading                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC:                                                                    
     Read 1048576 bytes at transfer rate 65811 Kbps                                 
    FLS_APP_DAC: Comparing                                                          
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC: Reading                                                            
    FLS_APP_DAC: Job Processing in Progress.                                        
    FLS_APP_DAC: Job Ends: SUCCESS                                                  
    FLS_APP_DAC:                                                                    
     Read 1048576 bytes at transfer rate 68202 Kbps                                 
    FLS_APP_DAC: DONE!</pre><h3><a class="anchor" id="ug_fls_eg_log_fls_app_indac"></a>
fls_app_indac</h3>
<pre class="fragment">    FLS_APP_INDAC:                                                                  
    ------------------FLS Sample Application - STARTS !!! ------------------        
    FLS_APP_INDAC: FLS spi_test Initiating and Starting.                            
    FLS_APP_INDAC: Variant - Pre Compile being used !!!                             
    FLS_APP_INDAC: Configuring Clocks.                                              
    FLS_APP_INDAC: Clock Configured at 166666666Hz                                  

    FLS MCAL Version Info                                                           
    ---------------------                                                           
    Vendor ID           : 44                                                        
    Module ID           : 92                                                        
    SW Major Version    : 1                                                         
    SW Minor Version    : 2                                                         
    SW Patch Version    : 1                                                         

    FLS_APP_INDAC: DATA SIZE TEST is 0x100000                                       
    FLS_APP_INDAC: Offset is 0x0                                                    
    FLS_APP_INDAC: Erasing                                                          
    FLS_APP_INDAC: Job Processing in Progress.                                      
    FLS_APP_INDAC: Job Ends: SUCCESS                                                
    FLS_APP_INDAC: Blank Checking                                                   
    FLS_APP_INDAC: Job Processing in Progress.                                      
    FLS_APP_INDAC: Job Ends: SUCCESS                                                
    FLS_APP_INDAC: Writing                                                          
    FLS_APP_INDAC: Job Processing in Progress.                                      
    FLS_APP_INDAC: Job Ends: SUCCESS                                                
    FLS_APP_INDAC:                                                                  
     Write 1048576 bytes at transfer rate 3631 Kbps                                 
    FLS_APP_INDAC: Reading                                                          
    FLS_APP_INDAC: Job Processing in Progress.                                      
    FLS_APP_INDAC: Job Ends: SUCCESS                                                
    FLS_APP_INDAC:                                                                  
     Read 1048576 bytes at transfer rate 43728 Kbps                                 
    FLS_APP_INDAC: Comparing                                                        
    FLS_APP_INDAC: Job Processing in Progress.                                      
    FLS_APP_INDAC: Job Ends: SUCCESS                                                
    FLS_APP_INDAC:                                                                  
     Changing mode to DAC                                                           
    FLS_APP_INDAC: DONE!                                                            </pre><h3><a class="anchor" id="ug_fls_eg_log_fls_app_xip"></a>
fls_app_xip</h3>
<pre class="fragment">    FLS_APP_XIP:
    ------------------FLS Sample Application - STARTS !!! ------------------
    FLS_APP_XIP:
     Running on J7 ES
    FLS_APP_XIP: FLS spi_test Initiating and Starting.
    FLS_APP_XIP: Variant - Pre Compile being used !!!
    FLS_APP_XIP: Configuring Clocks.
    FLS_APP_XIP: Clock Configured at 166666666Hz

    FLS MCAL Version Info
    ---------------------
    Vendor ID           : 44
    Module ID           : 92                                                        
    SW Major Version    : 1                                                         
    SW Minor Version    : 2                                                         
    SW Patch Version    : 1                                                         

    FLS_APP_XIP: DATA SIZE TEST is 0x1000                                           
    FLS_APP_XIP: Offset is 0x0                                                      
    FLS_APP_XIP: Erasing                                                            
    FLS_APP_XIP: Job Processing in Progress.                                        
    FLS_APP_XIP: Job Ends: SUCCESS                                                  
    FLS_APP_XIP: Blank Checking                                                     
    FLS_APP_XIP: Job Processing in Progress.                                        
    FLS_APP_XIP: Job Ends: SUCCESS                                                  
    FLS_APP_XIP: Writing                                                            
    FLS_APP_XIP: Job Processing in Progress.                                        
    FLS_APP_XIP: Job Ends: SUCCESS                                                  
    FLS_APP_XIP: Calling XIP app                                                    
    MCU1_0 running                                                                  
    MCU1_0 reports: All tests have passed                                           
    FLS_APP_XIP: Returning from XIP app, returned value is 0xFEEDFACE               
    FLS_APP_XIP: Reading                                                            
    FLS_APP_XIP: Job Processing in Progress.                                        
    FLS_APP_XIP: Job Ends: SUCCESS                                                  
    FLS_APP_XIP: Comparing                                                          
    FLS_APP_XIP: Job Processing in Progress.                                        
    FLS_APP_XIP: Job Ends: SUCCESS                                                  
    FLS_APP_XIP: DONE!    </pre><p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_fls_ref_top"></a>
References</h1>
<ul>
<li><a class="el" href="design_fls_top.html">Design Page</a></li>
<li><a href="https://www.autosar.org/fileadmin/user_upload/standards/classic/4-3/AUTOSAR_SWS_FlashDriver.pdf">AUTOSAR Spec : Internet Link</a></li>
</ul>
<p><a class="el" href="ug_fls_top.html#ug_fls_intro">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_fls_rev_hist"></a>
Document Revision History</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Revision  </th><th class="markdownTableHeadNone">Date  </th><th class="markdownTableHeadNone">Author  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Status   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.1  </td><td class="markdownTableBodyNone">26 May 2020  </td><td class="markdownTableBodyNone">Nikki Shah  </td><td class="markdownTableBodyNone">First version  </td><td class="markdownTableBodyNone">Pending Review   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.1  </td><td class="markdownTableBodyNone">5 June 2020  </td><td class="markdownTableBodyNone">Nikki Shah  </td><td class="markdownTableBodyNone">Addressed Review Comments  </td><td class="markdownTableBodyNone">Approved   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.2  </td><td class="markdownTableBodyNone">2 Nov 2020  </td><td class="markdownTableBodyNone">Nikki Shah  </td><td class="markdownTableBodyNone">MCUSW 01_03_00 Release  </td><td class="markdownTableBodyNone">Pending   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.3  </td><td class="markdownTableBodyNone">1 Mar 2021  </td><td class="markdownTableBodyNone">Nikki Shah  </td><td class="markdownTableBodyNone">Adding information for driver adaption  </td><td class="markdownTableBodyNone">Approved   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.4  </td><td class="markdownTableBodyNone">26 Jun 2023  </td><td class="markdownTableBodyNone">Nikki Shah  </td><td class="markdownTableBodyNone">Updated based on 1.06 release  </td><td class="markdownTableBodyNone">Approved   </td></tr>
</table>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mcal_ug_top.html">MCAL Module User Guide</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
