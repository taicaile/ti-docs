<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>MCUSW Documentation: Integrating MCAL Without Mcu and Port modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MCUSW Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ug_no_muc_port_top.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Integrating MCAL Without Mcu and Port modules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ug_no_muc_port_intro">Introduction</a></li>
<li class="level1"><a href="#ug_no_muc_port_block">Device Architecture</a></li>
<li class="level1"><a href="#ug_no_muc_port_arch_dmsc">Device Architecture DMSC</a></li>
<li class="level1"><a href="#ug_no_muc_port_autosar_mcu_port">AUTOSAR Mcu &amp; Port Primary functionality</a></li>
<li class="level1"><a href="#ug_no_muc_port_autosar_mcu_map">AUTOSAR Mapping Mcu Functionality</a></li>
<li class="level1"><a href="#ug_no_muc_port_autosar_port_map">AUTOSAR Mapping Port Functionality</a></li>
<li class="level1"><a href="#ug_no_muc_port_rev_hist">Document Revision History</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="ug_no_muc_port_intro"></a>
Introduction</h1>
<p>The MCUSW do not provide Mcu and Port MCAL drivers, this document details on techniques that could be used to integrate MCAL modules into an AUTOSAR stack with out Mcu and Port modules.</p>
<p>The techniques details below can also be applied for DRA80X class of devices.</p>
<h1><a class="anchor" id="ug_no_muc_port_block"></a>
Device Architecture</h1>
<div class="image">
<img src="ug_no_muc_port_device_block.png" title="DRA829 / TDA4VM / AM752x SoC top-level block diagram"/>
</div>
<ul>
<li>As show above 3 pimary domains, <b> Wake-up (WKUP)</b>, <b> MCU</b> &amp; <b> Main</b></li>
</ul>
<h3>Wake-up</h3>
<p><b>D</b>evice <b>M</b>anagement <b>S</b>ecurity <b>C</b>ontroller (DMSC) provides</p><ul>
<li>Power / Clock Management</li>
<li>Resource Management</li>
<li>Security Management</li>
<li>Other processing cores requests for resource, services to DMSC</li>
</ul>
<h3>MCU Domain</h3>
<ul>
<li>Dual Core R5F / lock step</li>
<li>Expected to host AUTOSAR/control SW</li>
</ul>
<h3>Main Domain</h3>
<ul>
<li>Multiple Compute cores (R5F’s, A72’s, C66x’s, C7x’s)</li>
<li>R5F's Expected to host AUTOSAR/Other SW functionalities</li>
</ul>
<p><a class="el" href="ug_no_muc_port_top.html">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_no_muc_port_arch_dmsc"></a>
Device Architecture DMSC</h1>
<ul>
<li>Each Compute core (CPU’s), before accessing / using a resource<ul>
<li>Request DMSC for required resources</li>
<li>Request DMSC to setup required clock frequencies (for required peripherals)</li>
<li>Typically done at start up</li>
</ul>
</li>
<li>DMSC hosts firmware, that provide these services<ul>
<li>Firmware is provided by TI</li>
</ul>
</li>
<li>SCI Client is hosted on other compute cores (MCU R5F, Main Domain R5F, A72, etc…)<ul>
<li>SCI Client API’s used to request these DMSC services</li>
</ul>
</li>
<li>DMSC Firmware<ul>
<li>Is a library hosted on DMSC</li>
<li>Firmware loaded by Secondary Boot Loader <b>(SBL)</b></li>
<li>Can be used in systems upto ASIL D</li>
</ul>
</li>
<li>SCI Client SW<ul>
<li>Is Interface library that provides API’s to request DMSC for a specific operation</li>
<li>Is hosted on local cores that requires services of DMSC</li>
<li>Can be used in systems upto ASIL D</li>
</ul>
</li>
</ul>
<p><a class="el" href="ug_no_muc_port_top.html">Back To Top</a></p>
<hr/>
 <h1><a class="anchor" id="ug_no_muc_port_autosar_mcu_port"></a>
AUTOSAR Mcu &amp; Port Primary functionality</h1>
<div class="image">
<img src="ug_no_muc_port_autosar_mcu_port.png" title="AUTOSAR on MCU R5F / AUTOSAR on MAIN R5F"/>
</div>
<ul>
<li>AUTOSAR / MCAL<ul>
<li>Can be hosted on MCU R5F and/or MAIN Domain R5F</li>
</ul>
</li>
<li>Mcu Primarily responsible for<ul>
<li>Reset of Device (SoC)</li>
<li>Reset of RAM</li>
<li>Configure Clock to peripherals, CPU’s</li>
</ul>
</li>
<li>Port Primarily responsible for<ul>
<li>De multiplexing a PIN for required functionality</li>
<li>Setup direction (in/out), enable pullup/pulldowns, etc…</li>
</ul>
</li>
</ul>
<p><a class="el" href="ug_no_muc_port_top.html">Back To Top</a> </p><hr/>
 <h1><a class="anchor" id="ug_no_muc_port_autosar_mcu_map"></a>
AUTOSAR Mapping Mcu Functionality</h1>
<h2>Configure Clocks</h2>
<ul>
<li>Jacinto 7 Class of devices has multiple level of clock multipliers / dividers (PLLs)</li>
<li>These PLLs are expected to be programmed and controller by DMSC</li>
<li>Clocks to CPU/Compute cores</li>
<li>Is to be done at start up (by secondary boot loaders - SBL)</li>
<li>Configured by DMSC Firmware, request raised by SBL via SciClient</li>
<li>Not expected to change until next power cycle</li>
</ul>
<h2>Clocks to peripherals</h2>
<ul>
<li>Configured by DMSC Firmware</li>
<li>Request raised by a SCI Client API on local core</li>
<li>Typically done at start up</li>
<li>Not expected to change until next power cycle</li>
</ul>
<h2>Clock Dividers within a peripheral</h2>
<ul>
<li>MCAL configurator allows integrators to select/specify peripheral clock dividers (if any)</li>
</ul>
<h2>SCI Client</h2>
<ul>
<li>Examples applications provided in SDK/PDK/MCAL demonstrate use of Sci Client API’s</li>
<li>TI SBL demonstrate configuring peripheral clocks (among others)</li>
</ul>
<h2>Reset of Device (SoC)</h2>
<ul>
<li>Sci Client API’s could be used to perform warm reset</li>
<li>Alternately, power-on reset can done in collaboration with external PMIC (Power Management Integrated Chip)</li>
<li>Achieves by driving MCU Error pin on the device, which would trigger PMIC to reset the device</li>
<li><b> CSL API’s provided to configure/use ERROR Pin of Jacinto 7 device </b></li>
</ul>
<h2>Reset of RAM</h2>
<ul>
<li>Is a shared resource for all compute cores</li>
<li>Isolation / Freedom From Interference is achieved by</li>
<li>Carving out dedicated area to each compute core</li>
<li>Enabling firewall to allow access to carved out section</li>
<li><b> Owned sections could be reset by CPU / DMA </b></li>
</ul>
<h2>Recommended</h2>
<ul>
<li>Configure peripheral clock in Secondary Boot Loader or AUTOSAR start up code</li>
</ul>
<p><a class="el" href="ug_no_muc_port_top.html">Back To Top</a> </p><hr/>
<h1><a class="anchor" id="ug_no_muc_port_autosar_port_map"></a>
AUTOSAR Mapping Port Functionality</h1>
<h2>De Muxing pin for a required functionality</h2>
<ul>
<li>Jacinto 7 Class of devices has multiple pins that enable interface to external chips/logics</li>
<li>Some of the pins can support more than 1 functionality (e.g. SPI Master-Out-Slave-In, can also act as Pwm output pin)</li>
<li>Some of the peripheral IO could be routed to more than 1 pin (only 1 to be active at a time)</li>
</ul>
<h2>TI provides a pin-mux</h2>
<ul>
<li><a href="https://dev.ti.com/pinmux/app.html#/default/">Cloud Tool Link</a></li>
<li>A cloud based tool, allows GUI based selection of PINs required functionality, configurations per pin</li>
<li>Generate simple C code / functions that could be invoked to configure the PINs</li>
</ul>
<h2>Multiple compute core requires to access device PINs</h2>
<ul>
<li>A single register could control multiple pins functionality</li>
<li>There could be instances where a single register might require access from multiple compute core</li>
</ul>
<h2>Recommended</h2>
<ul>
<li>One processing entity performs PIN de-mux (such as SBL, AUTOSAR start up code)</li>
</ul>
<p><a class="el" href="ug_no_muc_port_top.html">Back To Top</a> </p><hr/>
<p><b> <a href="https://e2e.ti.com/">Reach to TI - in case of questions</a> </b></p>
<hr/>
<h1><a class="anchor" id="ug_no_muc_port_rev_hist"></a>
Document Revision History</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Revision  </th><th class="markdownTableHeadNone">Date  </th><th class="markdownTableHeadNone">Author  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Status   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.1  </td><td class="markdownTableBodyNone">03 Feb 2020  </td><td class="markdownTableBodyNone">Sujith S  </td><td class="markdownTableBodyNone">Converted from PPT  </td><td class="markdownTableBodyNone">Pending Review   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.2  </td><td class="markdownTableBodyNone">05 Feb 2020  </td><td class="markdownTableBodyNone">Sujith S  </td><td class="markdownTableBodyNone">Addressed Review comments  </td><td class="markdownTableBodyNone">Approved   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mcal_ug_top.html">MCAL Module User Guide</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
