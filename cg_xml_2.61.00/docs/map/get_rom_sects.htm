<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Documentation for get_rom_sects.pl</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="_podblock_" style="background-color: #cccccc; color: #000" valign="middle">
<big><strong><span class="_podblock_">&nbsp;Documentation for get_rom_sects.pl</span></strong></big>
</td></tr>
</table>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#USAGE">USAGE</a></li>
  <li><a href="#ADDITIONAL-OPTIONS">ADDITIONAL OPTIONS</a></li>
  <li><a href="#PERL-VERSION-DETAILS">PERL VERSION DETAILS</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>get_rom_sects.pl</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Perl script that reads in an XML file representation of a linker map file and spits out something like as follows: -</p>

<pre><code>   /* This file is *auto-generated*. Do not edit. Mods risk being overwritten */ 
   SECTIONS {

      .dummy_rom_rts_out1 { -lrts6400.lib&lt;div.obj&gt; (.text:_ldiv) } &gt; 0x3e8c0, type=NOLOAD
      .dummy_rom_rts_out2 { -lrts6400.lib&lt;fixdi.obj&gt; (.text:__fixdi) } &gt; 0x3f760, type=NOLOAD

   }</code></pre>

<p>The end output is the list of all the sections that were ROM&#39;ed from a library and their end-ROM-placement.</p>

<p>The file generated by this script (output goes to STDOUT which can be piped to a file) gets passed into the user&#39;s RAM application link stage, simply to correctly resolve the link, ensuring that the ROM functions are used instead of RAM ones.</p>

<p>By calling out each function separately, we enable per-function patchability (simply comment out that function to use a new RAM version instead)</p>

<p>Note that the i/p XML version of map file can be obtained via linker option --xml_link_info=&lt;file&gt;</p>

<h1 id="USAGE">USAGE</h1>

<pre><code>   get_rom_sects.pl linker_xml_file -t=DSECT|NOLOAD -s=.rom_sect1 -s=.rom_sect2</code></pre>

<h1 id="ADDITIONAL-OPTIONS">ADDITIONAL OPTIONS</h1>

<pre><code> --cg_xml_version : Print out the version of the cg_xml package in use</code></pre>

<h1 id="PERL-VERSION-DETAILS">PERL VERSION DETAILS</h1>

<p>This script was written using Perl version 5.8.3. It may not work with earlier revisions of Perl.</p>

<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="_podblock_" style="background-color: #cccccc; color: #000" valign="middle">
<big><strong><span class="_podblock_">&nbsp;Documentation for get_rom_sects.pl</span></strong></big>
</td></tr>
</table>

</body>

</html>


