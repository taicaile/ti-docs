

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.9. MTOG : Master Time-Out Gasket &mdash; Software Diagnostics Library (SDL) - J721S2 User Guide</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Software Diagnostics Library (SDL) - J721S2 User Guide" href="../index.html"/>
        <link rel="up" title="4. Modules" href="../family_cfg/j721s2/index_modules_j721s2.html"/>
        <link rel="next" title="4.10. DCC : Dual Clock Comparator" href="dcc.html"/>
        <link rel="prev" title="4.8. TOG : Time-Out Gasket" href="tog.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_j721s2.html" class="icon icon-home"> Software Diagnostics Library (SDL) - J721S2 User Guide
          

          
          </a>

          
            
            
              <div class="version">
                01_01_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_release_notes_j721s2.html">2. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../family_cfg/j721s2/index_modules_j721s2.html">4. Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="esm.html">4.1. ESM : Error Signalling Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ecc.html">4.2. ECC : Error Correcting Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbist.html">4.3. PBIST : Memory Built-In Self-Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="lbist.html">4.4. LBIST : Logic Built-In Self-Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="vtm.html">4.5. VTM : Voltage and Thermal Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="rti.html">4.6. RTI : RTI/WWDT Windowed Watchdog Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="pok.html">4.7. POK: Power OK</a></li>
<li class="toctree-l2"><a class="reference internal" href="tog.html">4.8. TOG : Time-Out Gasket</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.9. MTOG : Master Time-Out Gasket</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">4.9.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-usage">4.9.2. Example Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">4.9.3. Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">4.9.4. API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dcc.html">4.10. DCC : Dual Clock Comparator</a></li>
<li class="toctree-l2"><a class="reference internal" href="mcrc.html">4.11. MCRC : Cyclic Redundancy Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="r5fccm.html">4.12. R5F CCM: CPU Compare Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="osal.html">4.13. OSAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="r5.html">4.14. R5 Core Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rom_checksum.html">4.15. ROM_CHECKSUM: ROM Checksum Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_examples_j721s2.html">5. Safety Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diagnostic_mappings.html">6. Diagnostic Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_application_notes_j721s2.html">7. Developer Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index_j721s2.html">Software Diagnostics Library (SDL) - J721S2 User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index_j721s2.html">Docs</a> &raquo;</li>
      
          <li><a href="../family_cfg/j721s2/index_modules_j721s2.html"><span class="section-number">4. </span>Modules</a> &raquo;</li>
      
    <li><span class="section-number">4.9. </span>MTOG : Master Time-Out Gasket</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="mtog-master-time-out-gasket">
<h1><span class="section-number">4.9. </span>MTOG : Master Time-Out Gasket<a class="headerlink" href="#mtog-master-time-out-gasket" title="Permalink to this headline">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">4.9.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Interconnect Isolation Gasket is a TI proprietary IP that is used to prevent a hang caused by master, which can hold up the interconnect and terminate such a transaction safely. It tracks transactions, and times out if outstanding too long, and reports the error via interrupt that can be monitored.</p>
<p>The MTOGs help to achieve Freedom From Interference by monitoring the various VBUS transactions and providing a way to detect any errors, and helping to avoid the bus to be locked up due to a transaction error.</p>
<p>These MTOGs have the following functions, to avoid these concerns:</p>
<ul class="simple">
<li><p>Monitors various VBUS transaction and provide a way to detect errors</p></li>
<li><p>Helps avoid the bus to be locked up due to a transaction in error.</p></li>
</ul>
<p>Each of the Master Timeout gaskets can be programmed to a specific timeout and any transaction exceeding the timeout will result in all requests are blocked, readies are set high from the master. Once all transactions are returned, the gasket indicates idle. This will also result in an error event triggered through ESM, which will in turn can be programmed to interrupt the CPU.</p>
<p>In addition the master timeout gasket can be stopped, started and reset at anytime.</p>
<p>Safety diagnostics are provided for MTOG module through API’s</p>
<ul class="simple">
<li><p>Configure the MTOG</p></li>
<li><p>Read the static registers</p></li>
<li><p>Verify the written configuration</p></li>
</ul>
<p>J7200 supports 24 instances on the device.</p>
</section>
<section id="example-usage">
<h2><span class="section-number">4.9.2. </span>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>The following shows an example of SDL MTOG API usage by the application to set up the MTOG for monitoring for events. Events can be monitored by enabling the events in the associated ESM instance.</p>
<p>Configure a MTOG instance with a timeout value</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SDL_MTOG_Inst<span class="w"> </span>instance<span class="p">;</span>
SDL_MTOG_config<span class="w"> </span>cfg<span class="p">;</span>
int32_t<span class="w"> </span>status<span class="p">;</span>

cfg.timeOut<span class="w"> </span><span class="o">=</span><span class="w"> </span>MTOG_TEST_TIMEOUTVAL<span class="p">;</span>

<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_MTOG_init<span class="o">(</span>instance,<span class="w"> </span><span class="p">&amp;</span>cfg<span class="o">)</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="o">(</span>status<span class="w"> </span>!<span class="o">=</span><span class="w"> </span>SDL_PASS<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>init<span class="w"> </span>failed
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Start the MTOG</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/*<span class="w"> </span>Call<span class="w"> </span>SDL<span class="w"> </span>API<span class="w"> </span>to<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>Master<span class="w"> </span>Timeout<span class="w"> </span>Gasket<span class="w"> </span>*/
<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_MTOG_start<span class="o">(</span>instance<span class="o">)</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="o">(</span>status<span class="w"> </span>!<span class="o">=</span><span class="w"> </span>SDL_PASS<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>start<span class="w"> </span>failed
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Inject error in the MTOG</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/*<span class="w"> </span>Call<span class="w"> </span>SDL<span class="w"> </span>API<span class="w"> </span>to<span class="w"> </span>inject<span class="w"> </span>error<span class="w"> </span>by<span class="w"> </span>forcing<span class="w"> </span>timeout<span class="w"> </span>*/
<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_MTOG_forceTimeout<span class="o">(</span>instance<span class="o">)</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="o">(</span>status<span class="w"> </span>!<span class="o">=</span><span class="w"> </span>SDL_PASS<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>start<span class="w"> </span>failed
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Reset the MTOG</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/*<span class="w"> </span>Reset<span class="w"> </span>the<span class="w"> </span>Master<span class="w"> </span>Timeout<span class="w"> </span>gasket<span class="w"> </span>when<span class="w"> </span>error<span class="w"> </span>occurs*/
SDL_MTOG_reset<span class="o">(</span><span class="w"> </span>instance<span class="w"> </span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Stop the MTOG</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/*<span class="w"> </span>Disable<span class="w"> </span>the<span class="w"> </span>Master<span class="w"> </span>Timeout<span class="w"> </span>gasket<span class="w"> </span>*/
SDL_MTOG_Inst<span class="w"> </span>instance<span class="p">;</span>

SDL_MTOG_stop<span class="o">(</span>instance<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="examples">
<h2><span class="section-number">4.9.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The MTOG module provide a Safety Example to show how to use MTOG with error injection and testing for error response, and also ESM application callback usage.</p>
<p>Test apps that are meant for verifying the functionality of the module are also provided.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Test App Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Location</p></th>
<th class="head"><p>Build Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mtog_test_app</p></td>
<td><ul class="simple">
<li><p>Configures the timeout</p></li>
<li><p>Triggers the error events</p></li>
<li><p>Checks for error response</p></li>
</ul>
</td>
<td><p>[sdl_install_dir]/test/mtog</p></td>
<td><p>make mtog_test_app PROFILE=release</p></td>
</tr>
</tbody>
</table>
</section>
<section id="api">
<h2><span class="section-number">4.9.4. </span>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="../../../apiguide/j721s2/html/group__SDL__MTOG__API.html">MTOG API Guide</a></p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dcc.html" class="btn btn-neutral float-right" title="4.10. DCC : Dual Clock Comparator" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tog.html" class="btn btn-neutral" title="4.8. TOG : Time-Out Gasket" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2021</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'01_01_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>