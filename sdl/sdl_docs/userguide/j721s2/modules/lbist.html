

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.4. LBIST : Logic Built-In Self-Test &mdash; Software Diagnostics Library (SDL) - J721S2 User Guide</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Software Diagnostics Library (SDL) - J721S2 User Guide" href="../index.html"/>
        <link rel="up" title="4. Modules" href="../family_cfg/j721s2/index_modules_j721s2.html"/>
        <link rel="next" title="4.5. VTM : Voltage and Thermal Management" href="vtm.html"/>
        <link rel="prev" title="4.3. PBIST : Memory Built-In Self-Test" href="pbist.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_j721s2.html" class="icon icon-home"> Software Diagnostics Library (SDL) - J721S2 User Guide
          

          
          </a>

          
            
            
              <div class="version">
                01_01_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_release_notes_j721s2.html">2. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">3. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../family_cfg/j721s2/index_modules_j721s2.html">4. Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="esm.html">4.1. ESM : Error Signalling Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ecc.html">4.2. ECC : Error Correcting Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbist.html">4.3. PBIST : Memory Built-In Self-Test</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.4. LBIST : Logic Built-In Self-Test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">4.4.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-usage">4.4.2. Example Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">4.4.3. Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">4.4.4. API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vtm.html">4.5. VTM : Voltage and Thermal Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="rti.html">4.6. RTI : RTI/WWDT Windowed Watchdog Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="pok.html">4.7. POK: Power OK</a></li>
<li class="toctree-l2"><a class="reference internal" href="tog.html">4.8. TOG : Time-Out Gasket</a></li>
<li class="toctree-l2"><a class="reference internal" href="mtog.html">4.9. MTOG : Master Time-Out Gasket</a></li>
<li class="toctree-l2"><a class="reference internal" href="dcc.html">4.10. DCC : Dual Clock Comparator</a></li>
<li class="toctree-l2"><a class="reference internal" href="mcrc.html">4.11. MCRC : Cyclic Redundancy Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="r5fccm.html">4.12. R5F CCM: CPU Compare Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="osal.html">4.13. OSAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="r5.html">4.14. R5 Core Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rom_checksum.html">4.15. ROM_CHECKSUM: ROM Checksum Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_examples_j721s2.html">5. Safety Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diagnostic_mappings.html">6. Diagnostic Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../family_cfg/j721s2/index_application_notes_j721s2.html">7. Developer Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index_j721s2.html">Software Diagnostics Library (SDL) - J721S2 User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index_j721s2.html">Docs</a> &raquo;</li>
      
          <li><a href="../family_cfg/j721s2/index_modules_j721s2.html"><span class="section-number">4. </span>Modules</a> &raquo;</li>
      
    <li><span class="section-number">4.4. </span>LBIST : Logic Built-In Self-Test</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="lbist-logic-built-in-self-test">
<h1><span class="section-number">4.4. </span>LBIST : Logic Built-In Self-Test<a class="headerlink" href="#lbist-logic-built-in-self-test" title="Permalink to this headline">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">4.4.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Built-in Self-test (BIST) is a feature taht allows self testing of the memory areas and logic circuitry in an Integrated Circuit (IC) without any external test equipment. In an embedded system, these tests are typically used during boot time or shutdown of the system to check the health of an SoC.</p>
<p>LBIST is used to test the logic circuitry in an SoC associated with the CPU cores. There are multiple LBIST instances in the SoC, and each has a different processor core associated with it. There are LBIST tests that can be software-initiated. Those are supported by SDL. SDL also provides support for checking of the status of HW POST LBIST.</p>
<p>Some things to note:</p>
<ul class="simple">
<li><p>LBIST is expected to be run at startup or once per drive cycle.</p></li>
<li><p>LBIST must be initiated from a different core than is being tested, similar to PBIST</p></li>
<li><p>BIST is executed by hardware for MCU and DMSC automatically at boot up as part of HW POST</p></li>
</ul>
<p>J7ES supports a software-initiated LBIST that can run be initiated at runtime. Note, however, that LBIST is destructive to the core/IP on which it is run. If it is executed after the IP under test is already in use in the system, it is the application’s responsibility to perform any necessary context save/restore necessary for the core/IP. Also, it is not supported to run the LBIST test for a core on itself, as it will be self destructive.</p>
<p>The LBIST Module of the SDL supports execution of the software-initiated LBIST for the various supported instances. It provides the following services:</p>
<ul class="simple">
<li><p>Execution of the LBIST test for a specified instance</p></li>
<li><p>Configuration of the LBIST test for an instance</p></li>
<li><p>Start of the LBIST test</p></li>
<li><p>Checking of the LBIST results</p></li>
<li><p>Restore core to system control (LBIST reset and release test mode)</p></li>
<li><p>Return the status of the test</p></li>
</ul>
<p>There are 7 LBIST instances in J7AEP.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Execution of the LBIST tests requires preparation of the IPs under test by bringing them to a certain power and reset state before executing the test. It will be required that the application bring the cores/IPs to the proper state before executing the LBIST. Additionally, there is an “exit sequence” that is required to bring the cores/IPs back to the system control after the LBIST test is executed. This will also be the responsibility of the application. The LBIST examples provided with SDL will give the necessary sequences, which can be used by the application for implementing the sequence.</p>
</aside>
</section>
<section id="example-usage">
<h2><span class="section-number">4.4.2. </span>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>The following shows an example of SDL LBIST API usage by the application to check the HW POST results, and execute the LBIST test.</p>
<p>Check the HW POST result (if supported on device):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>int32_t<span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_PASS<span class="p">;</span>
SDL_LBIST_postResult<span class="w"> </span>result<span class="p">;</span>

<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_LBIST_getPOSTStatus<span class="o">(</span><span class="p">&amp;</span>result<span class="o">)</span><span class="p">;</span>

/*<span class="w"> </span>Check<span class="w"> </span>the<span class="w"> </span>result,<span class="w"> </span>which<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>SDL_LBIST_postResult<span class="w"> </span>*/
<span class="k">if</span><span class="w"> </span><span class="o">(</span>result.mcuPostStatus<span class="w"> </span><span class="o">==</span><span class="w"> </span>SDL_LBIST_POST_NOT_RUN<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>LBIST<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span>run
<span class="o">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>result.mcuPostStatus<span class="w"> </span><span class="o">==</span><span class="w"> </span>SDL_LBIST_POST_TIMEOUT<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>LBIST<span class="w"> </span><span class="nb">test</span><span class="w"> </span>timed<span class="w"> </span>out
<span class="o">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>result.mcuPostStatus<span class="w"> </span><span class="o">==</span><span class="w"> </span>SDL_PBIST_POST_COMPLETED_FAILURE<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>LBIST<span class="w"> </span>failed
<span class="o">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>result.mcuPostStatus<span class="w"> </span><span class="o">==</span><span class="w"> </span>SDL_PBIST_POST_COMPLETED_SUCCESS<span class="o">)</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>LBIST<span class="w"> </span>passed
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Before executing the following LBIST tests, the IP under test must be brought to a certain power and reset state. The included LBIST example shows the sequence needed for each of the LBIST instances.</p>
<p>Once the core(s) are brought to the required state, the following APIs can be run.</p>
<p>Perform the LBIST test</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bool<span class="w"> </span>LBISTResult<span class="p">;</span>

/*<span class="w"> </span>Prior<span class="w"> </span>to<span class="w"> </span>calling,<span class="w"> </span>perform<span class="w"> </span>the<span class="w"> </span>needed<span class="w"> </span>core<span class="w"> </span>initialization<span class="w"> </span>sequence<span class="w"> </span>-<span class="w"> </span>check<span class="w"> </span>thest<span class="w"> </span>application<span class="w"> </span><span class="k">for</span><span class="w"> </span>example<span class="w"> </span>*/

<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_LBIST_selfTest<span class="o">(</span>SDL_LBIST_INST_MAINR5F0,<span class="w"> </span>SDL_LBIST_TEST,<span class="w"> </span><span class="p">&amp;</span>LBISTResult<span class="o">)</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="o">((</span>status<span class="w"> </span>!<span class="o">=</span><span class="w"> </span>SDL_PASS<span class="o">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">(</span><span class="nv">PBISTResult</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="o">))</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span><span class="nb">test</span><span class="w"> </span>failed
<span class="o">}</span>
<span class="k">else</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>LBIST<span class="w"> </span><span class="nb">test</span><span class="w"> </span>passed
<span class="o">}</span>

/*<span class="w"> </span>Perform<span class="w"> </span>Core<span class="w"> </span>restore<span class="w"> </span>sequence<span class="w"> </span>-<span class="w"> </span>check<span class="w"> </span><span class="nb">test</span><span class="w"> </span>application<span class="w"> </span><span class="k">for</span><span class="w"> </span>example<span class="w"> </span>*/

/*<span class="w"> </span>Release<span class="w"> </span>the<span class="w"> </span>core<span class="w"> </span>from<span class="w"> </span>isolation<span class="w"> </span>*/
<span class="nv">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>SDL_LBIST_selfTest<span class="o">(</span>SDL_LBIST_INST_MAINR5F0,<span class="w"> </span>SDL_LBIST_TEST_RELEASE,<span class="w"> </span><span class="p">&amp;</span>result<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="examples">
<h2><span class="section-number">4.4.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The LBIST module provides a test app that demonstrate the LBIST functionality. Details of the test app name, location and build instructions are given in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Test App Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Location</p></th>
<th class="head"><p>Build Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sdl_lbist_test_app</p></td>
<td><ul class="simple">
<li><p>Checks the Status of HW POST</p></li>
<li><p>Executes LBIST_TEST for all supported instances</p></li>
</ul>
</td>
<td><p>[sdl_install_dir]/test/lbist/</p></td>
<td><p>make sdl_lbist_test_app PROFILE=release</p></td>
</tr>
</tbody>
</table>
</section>
<section id="api">
<h2><span class="section-number">4.4.4. </span>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="../../../apiguide/j721s2/html/group__SDL__LBIST__API.html">LBIST API Guide</a></p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vtm.html" class="btn btn-neutral float-right" title="4.5. VTM : Voltage and Thermal Management" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pbist.html" class="btn btn-neutral" title="4.3. PBIST : Memory Built-In Self-Test" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2021</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'01_01_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>