

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9.16. Running SDE and DOF for 2M-Pixel Input &mdash; Processor SDK RTOS J721S2</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Processor SDK RTOS J721S2" href="index.html"/>
        <link rel="up" title="9. Developer Notes" href="developer_notes.html"/>
        <link rel="next" title="9.17. SDK 8.6 -&gt; SDK 9.0 Migration Guide" href="developer_notes_migration_guide.html"/>
        <link rel="prev" title="9.15. Enabled block-based memory access in OpenVX kernels" href="developer_notes_dma_kernel.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Processor SDK RTOS J721S2
          

          
          </a>

          
            
            
              <div class="version">
                09_00_01
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_j721s2.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware_builder.html">3. AM68A Firmware Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk_components_j721s2.html">4. SDK Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">5. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="evm_setup_j721s2.html">6. EVM Setup for J721S2</a></li>
<li class="toctree-l1"><a class="reference internal" href="ccs_setup_j721s2.html">7. CCS Setup for J721S2</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasheet_sdk_j721s2.html">8. Data Sheet</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer_notes.html">9. Developer Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developer_notes_concerto.html">9.1. Understanding concerto makefile system</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_bootloaders.html">9.2. Understanding bootloaders in Processor SDK J721S2 (RTOS/Linux)</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_mcu1_0_sysfw.html">9.3. MCU1_0 Application Development with SYSFW</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_ipc.html">9.4. Developing IPC applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_enet_j721s2.html">9.5. Developing Ethernet based applications with Linux + RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_cptracer.html">9.6. System Traffic Profiling using CPTracer on J7</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_security_build.html">9.7. Developing with High Security Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_psdkla.html">9.8. Using Processor SDK Linux with Processor SDK RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_memory_map.html">9.9. Understanding and updating SDK memory map for J721S2</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_tidl.html">9.10. Developing deep learning applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_hwa.html">9.11. Developing HW accelerator applications with OpenVX</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_image_sensor.html">9.12. Adding new image sensor to PSDK RTOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_ddr_inline_ecc.html">9.13. Enabling TI’s inline ECC for DDR</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_display_resolution.html">9.14. Changing Display Resolution in Vision Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_dma_kernel.html">9.15. Enabled block-based memory access in OpenVX kernels</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">9.16. Running SDE and DOF for 2M-Pixel Input</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">9.16.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dmpac-sl2-memory-reallocation">9.16.2. DMPAC SL2 Memory Reallocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sde-and-dof-demos-for-2m-pixel-input">9.16.3. SDE and DOF Demos for 2M-Pixel Input</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sde-demo">9.16.3.1. SDE Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dof-demos">9.16.3.2. DOF Demos</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_migration_guide.html">9.17. SDK 8.6 -&gt; SDK 9.0 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_notes_tda4_latest_faqs.html">9.18. Latest FAQs on TDA4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="documentation_tarball.html">10. Documentation Tarball</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Processor SDK RTOS J721S2</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="developer_notes.html"><span class="section-number">9. </span>Developer Notes</a> &raquo;</li>
      
    <li><span class="section-number">9.16. </span>Running SDE and DOF for 2M-Pixel Input</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-sde-and-dof-for-2m-pixel-input">
<h1><span class="section-number">9.16. </span>Running SDE and DOF for 2M-Pixel Input<a class="headerlink" href="#running-sde-and-dof-for-2m-pixel-input" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2><span class="section-number">9.16.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Stereo Depth Engine (SDE) and Dense Optical Flow (DOF) HWAs are designed to process the input resolution up to 2048x1024. However, due to the limited size of a SL2 memory block that serves both SDE and DOF, they cannot process 2M-pixel inputs at the same time. By default, SDE and DOF are assigned SL2 memory for the input sequences with smaller horizontal size and smaller search range than supported. For example, the default SL2 memory mapping allows SDE to process up to 1280 horizontal pixels with disparity search range of 128 and allows DOF to process up to 1312 horizontal pixels with vertical search range of -48 ~ +48. Note that the maximum disparity search range for SDE is 192 and the maximum vertical search range for DOF is -62 ~ +62.</p>
<p>Therefore, in order for either SDE or DOF to process 2M-pixel input with larger search range, SL2 memory should be reallocated. This developer note explains how to do it.</p>
</div>
<div class="section" id="dmpac-sl2-memory-reallocation">
<h2><span class="section-number">9.16.2. </span>DMPAC SL2 Memory Reallocation<a class="headerlink" href="#dmpac-sl2-memory-reallocation" title="Permalink to this headline">¶</a></h2>
<p>To support SL2 memory reallocation for DMPAC, the VHWA remote service handler named <em>APP_VHWA_SERVICE_NAME</em> is registered during the vision_apps initialization step. The VHWA remote service handler receives the four commands as shown in the table below. Note that these commands and related parameters are defined in &lt;SDK_PATH&gt;/vision_apps/utils/hwa/include/app_hwa.h.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>APP_DMPAC_SDE_SL2_FREE</p></td>
<td><p>Free SL2 memory assigned already for SDE</p></td>
</tr>
<tr class="row-odd"><td><p>APP_DMPAC_DOF_SL2_FREE</p></td>
<td><p>Free SL2 memory assigned already for DOF</p></td>
</tr>
<tr class="row-even"><td><p>APP_DMPAC_SDE_SL2_REALLOC</p></td>
<td><p>Allocate SL2 memory for SDE according to the given SL2 memory parameters</p></td>
</tr>
<tr class="row-odd"><td><p>APP_DMPAC_DOF_SL2_REALLOC</p></td>
<td><p>Allocate SL2 memory for DOF according to the given SL2 memory parameters</p></td>
</tr>
</tbody>
</table>
<p>Before reallocating SL2 memory for SDE and DOF, existing SL2 memory should be freed up. The application should call the remote services with <em>APP_DMPAC_SDE_SL2_FREE</em> and <em>APP_DMPAC_DOF_SL2_FREE</em> commands as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">vhwaDmpacSl2Free</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">appRemoteServiceRun</span><span class="p">(</span><span class="n">APP_IPC_CPU_MCU2_1</span><span class="p">,</span><span class="w"> </span><span class="n">APP_VHWA_SERVICE_NAME</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">APP_DMPAC_SDE_SL2_FREE</span><span class="p">,</span>
<span class="w">                                 </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">appRemoteServiceRun</span><span class="p">(</span><span class="n">APP_IPC_CPU_MCU2_1</span><span class="p">,</span><span class="w"> </span><span class="n">APP_VHWA_SERVICE_NAME</span><span class="p">,</span>
<span class="w">                                     </span><span class="n">APP_DMPAC_DOF_SL2_FREE</span><span class="p">,</span>
<span class="w">                                     </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then SL2 memory should be allocated again with desired parameters. For SDE to process 2M-pixel input with 192 disparity search range, the remote service with <em>APP_DMPAC_SDE_SL2_REALLOC</em> command should be called as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">vhwaDmpacSdeSl2Realloc</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="n">App_M2mSdeSl2AllocPrms</span><span class="w"> </span><span class="n">sl2AllocPrms</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Reset parameters</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">maxImgWidth</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">inCcsf</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">APP_FVID2_CCSF_BITS12_UNPACKED16</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">searchRange</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">APP_SDE_SR_192</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">disBuffDepth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">APP_SDE_DEFAULT_DIS_BUFF_DEPTH</span><span class="p">;</span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">appRemoteServiceRun</span><span class="p">(</span><span class="n">APP_IPC_CPU_MCU2_1</span><span class="p">,</span><span class="w"> </span><span class="n">APP_VHWA_SERVICE_NAME</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">APP_DMPAC_SDE_SL2_REALLOC</span><span class="p">,</span>
<span class="w">                                 </span><span class="o">&amp;</span><span class="n">sl2AllocPrms</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">sl2AllocPrms</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similarly, for DOF to process 2M-pixel input with vertical search range of -62 ~ +62, the remote service with <em>APP_DMPAC_DOF_SL2_REALLOC</em> command should be called as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int32_t</span><span class="w"> </span><span class="nf">vhwaDmpacDofSl2Realloc</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="n">App_M2mDofSl2AllocPrms</span><span class="w"> </span><span class="n">sl2AllocPrms</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Reset parameters</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">maxImgWidth</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">inCcsf</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">APP_FVID2_CCSF_BITS12_UNPACKED16</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">refBuffDepth</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">APP_DOF_DEFAULT_REF_BUFF_DEPTH</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">currBuffDepth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">APP_DOF_DEFAULT_CUR_BUFF_DEPTH</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">fvBuffDepth</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">APP_DOF_DEFAULT_FV_BUFF_DEPTH</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">topSR</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mi">62</span><span class="p">;</span>
<span class="w">    </span><span class="n">sl2AllocPrms</span><span class="p">.</span><span class="n">botSR</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mi">62</span><span class="p">;</span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">appRemoteServiceRun</span><span class="p">(</span><span class="n">APP_IPC_CPU_MCU2_1</span><span class="p">,</span><span class="w"> </span><span class="n">APP_VHWA_SERVICE_NAME</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">APP_DMPAC_DOF_SL2_REALLOC</span><span class="p">,</span>
<span class="w">                                 </span><span class="o">&amp;</span><span class="n">sl2AllocPrms</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">sl2AllocPrms</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sde-and-dof-demos-for-2m-pixel-input">
<h2><span class="section-number">9.16.3. </span>SDE and DOF Demos for 2M-Pixel Input<a class="headerlink" href="#sde-and-dof-demos-for-2m-pixel-input" title="Permalink to this headline">¶</a></h2>
<p>Let us take examples of &lt;SDK_PATH&gt;/vision_apps/apps/basic_demos/app_stereo and &lt;SDK_PATH&gt;/vision_apps/apps/basic_demos/app_dof to see what should be added for SDE and DOF demos to support 2M-pixel input with larger search range.</p>
<div class="section" id="sde-demo">
<h3><span class="section-number">9.16.3.1. </span>SDE Demo<a class="headerlink" href="#sde-demo" title="Permalink to this headline">¶</a></h3>
<p>app_init() function in &lt;SDK_PATH&gt;/vision_apps/apps/basic_demos/app_stereo/main.c should be modified as shown below. Note that vhwaDmpacSl2Free() and vhwaDmpacSdeSl2Realloc(), which are introduced in the previous section, are called.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">vx_status</span><span class="w"> </span><span class="nf">app_init</span><span class="p">(</span><span class="n">AppObj</span><span class="w"> </span><span class="o">*</span><span class="n">obj</span><span class="p">)</span>
<span class="p">{</span>

<span class="w">    </span><span class="n">vx_status</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VX_SUCCESS</span><span class="p">;</span>
<span class="w">    </span><span class="n">app_grpx_init_prms_t</span><span class="w"> </span><span class="n">grpx_prms</span><span class="p">;</span>


<span class="cp">#if !defined(PC)</span>
<span class="w">    </span><span class="c1">// Free SDE and DOF SL2</span>
<span class="w">    </span><span class="n">vhwaDmpacSl2Free</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Reallocate SDE SL2</span>
<span class="w">    </span><span class="n">vhwaDmpacSdeSl2Realloc</span><span class="p">();</span>
<span class="cp">#endif</span>

<span class="w">    </span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vxCreateContext</span><span class="p">();</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vxGetStatus</span><span class="p">((</span><span class="n">vx_reference</span><span class="p">)</span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">VX_SUCCESS</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">tivxStereoLoadKernels</span><span class="p">(</span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="p">);</span>
<span class="w">        </span><span class="n">tivxHwaLoadKernels</span><span class="p">(</span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="p">...</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dof-demos">
<h3><span class="section-number">9.16.3.2. </span>DOF Demos<a class="headerlink" href="#dof-demos" title="Permalink to this headline">¶</a></h3>
<p>app_init() function in &lt;SDK_PATH&gt;/vision_apps/apps/basic_demos/app_dof/main.c should be modified as shown below. Note that vhwaDmpacSl2Free() and vhwaDmpacDofSl2Realloc(), which are introduced in the previous section, are called.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">vx_status</span><span class="w"> </span><span class="nf">app_init</span><span class="p">(</span><span class="n">AppObj</span><span class="w"> </span><span class="o">*</span><span class="n">obj</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">app_grpx_init_prms_t</span><span class="w"> </span><span class="n">grpx_prms</span><span class="p">;</span>
<span class="w">    </span><span class="n">vx_status</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VX_SUCCESS</span><span class="p">;</span>


<span class="cp">#if !defined(PC)</span>
<span class="w">    </span><span class="c1">// Free SDE and DOF SL2</span>
<span class="w">    </span><span class="n">vhwaDmpacSl2Free</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Reallocate SDE SL2</span>
<span class="w">    </span><span class="n">vhwaDmpacDofSl2Realloc</span><span class="p">();</span>
<span class="cp">#endif</span>


<span class="w">    </span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vxCreateContext</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">VX_SUCCESS</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vxGetStatus</span><span class="p">((</span><span class="n">vx_reference</span><span class="p">)</span><span class="w"> </span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">tivxHwaLoadKernels</span><span class="p">(</span><span class="n">obj</span><span class="o">-&gt;</span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">...</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="developer_notes_migration_guide.html" class="btn btn-neutral float-right" title="9.17. SDK 8.6 -&gt; SDK 9.0 Migration Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="developer_notes_dma_kernel.html" class="btn btn-neutral" title="9.15. Enabled block-based memory access in OpenVX kernels" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2022</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>